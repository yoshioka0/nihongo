const _0x3207fb = _0x5080;
function _0x57e5() {
    const _0x6c25df = [
        'Aw1Hz2uTChjLDMLLDY1JB250ywLUzxi',
        'sw52ywXPzcbhsuyGvvjmoG',
        'Bwf0y2HLCW',
        'l2fWAs9JAgf0CY9IBg9JAY1ZDgf0DxmV',
        'D2LKDgG',
        'yM9Sza',
        'z2vUzxjHDgvlzxK',
        'DxnLCM5HBwu',
        'Aw52ywXPzcbNAwy',
        'ievYCM9YihvWzgf0Aw5Nig1LC3nHz2uGy2fJAgu6ia',
        'tM8GDg9Rzw4GzM91BMq',
        'BwvZC2fNzs1PBNb1Da',
        'Dw5YzwfKlwnVBNrHAw5LCG',
        'Ew91DhvIzs5JB20',
        '4PQG77Ipie5VignOyxqGC2vSzwn0zwqGDg8GCMvMCMvZAc4',
        '8j+tQsbozxCGBwvZC2fNzsbMCM9Tia',
        'pha+rxjYB3iGBg9HzgLUzYbTzxnZywDLCY4GugXLyxnLihrYEsbHz2fPBIbSyxrLCI48l3a+',
        'Dg9mB3DLCKnHC2u',
        'igHHCYbIzwvUia',
        'pha+u2vHCMnOihf1zxj5igXLBMD0AcbTDxn0igjLid49idm8l3a+',
        'CMvTB3zL',
        'B2zMBgLUzq',
        'zw4Tvvm',
        'qMvHCMvYia',
        'y292zxi',
        'Cg9ZAxrPB246igzPEgvKoYb0B3a6idCWChG7igXLzNq6ideWChG7igjHy2TNCM91BMq6icmWmdDIzMy7ignVBg9YoIb3AgL0ztSGCgfKzgLUzZOGohb4oYbIB3jKzxiTCMfKAxvZoIa0ChG7ihOTAw5KzxG6ideWmda7',
        'A2v5zg93BG',
        'B2zMC2v0v2LKDgG',
        'qMXVy2S',
        'mtq0DLrfBLnt',
        'B3bHy2L0EsaWlJrZigvHC2uTB3v0lcb0CMfUC2zVCM0Gmc40CYbLyxnLlw91Da',
        'yMfJA2DYB3vUza',
        'C2vZC2LVBI1Hy3rPDMu',
        'q2HHDcbOAxn0B3j5ihDPDgGG',
        'yxbWzw5K',
        'C2HVCNq',
        'rxjYB3iGC2vUzgLUzYbTzxnZywDLoG',
        'C29YDa',
        'mtm4otLKtKHwCuW',
        'lNzPzgvVlxbVChvW',
        'rgvSzxrPBMCGq2HHDcbiAxn0B3j5lcbqBgvHC2uGv2fPDc4UlG',
        'qxjLihLVDsbZDxjLihLVDsb3yw50ihrVigrLBgv0zsb0AgLZig1LC3nHz2u/',
        'Aw5WDxq',
        'DgLTzxn0yw1W',
        'CMf3',
        'C2nYB2XSsgvPz2H0',
        'Dgv4DenVBNrLBNq',
        '4PQG77IpifnVBwuGy2HHDhmGzMfPBgvKihrVigXVywqGzhvLihrVigrLy3j5ChrPB24GzxjYB3jZlG',
        'DgHLBG',
        'ntu3mfvgD01UCG',
        'q2HHDcbJywnOzsbJBgvHCMvKigzVCIb1C2vYia',
        'C2nYB2XSvg9W',
        'w2rHDgeTDxnLCI1Pzd0N',
        '4PQG77IpierPC2nVBM5Ly3rLza',
        'y2HHDhrLzfvZzxjZ',
        'BgvMDa',
        'y2XVC2uTyNv0Dg9U',
        'y29SB3i',
        'l2HXzgvMyxvSDc5QCgC',
        'u2vUDcbjBwfNzq',
        'z2v0sxrLBq',
        '8j+uHcbdAgvJA2LUzYbMB3iGBwLZC2LUzYbTzxnZywDLCYaUlI4',
        'zhjVCgrVD24TBwvUDq',
        'BgfZDefJDgL2zq',
        'y2HHDf8',
        'l25PAg9Uz28VBwvKAweVCg9WlM1WmW',
        'ihjLywqGBwvZC2fNzxmGAw4Gy2HHDca',
        'C3vIDgXL',
        'B3bLBG',
        'pha+tM8GDxnLCNmGzM91BMqGBwf0y2HPBMCGEw91CIbXDwvYEs48l3a+',
        'C3rYAw5NAwz5',
        'AM9PBG',
        'pgHYignSyxnZpsj1BNjLywqTzgL2AwrLCIi+phnWyw4Gy2XHC3m9iNvUCMvHzc10zxH0iJ5vBNjLywqGtwvZC2fNzxm8l3nWyw4+',
        'BwLU',
        'zMXVB3i',
        'igHHCYbIzwvUigrLBgv0zwqGyNKGDgHLig90AgvYihvZzxiU',
        'AgLKzgvU',
        'Dg91y2HTB3zL',
        'ANnVBG',
        'x2LK',
        'y3nZvgv4Da',
        'CMvZAxPL',
        'Aw1Hz2uTyNv0Dg9U',
        '8j+BNcbtB2nRzxqGy29UBMvJDgvKihrVihrOzsbZzxj2zxiGD2L0AcbjrdO',
        'DMLKzw8TDxjS',
        'DhLWzq',
        'q2HHDcb1C2vYieLeigLZihvUzgvMAw5Lzc4Gq2fUBM90igrLBgv0zsbJAgf0igHPC3rVCNKU',
        'zNjVBq',
        'lM1LC3nHz2uUC2vSzIaUCMvHzc1YzwnLAxb0',
        'C3rHCNrZv2L0Aa',
        'w2rHDgeTBwvZC2fNzs1Pzd0I',
        'zgf0yq',
        'Dhj1zq',
        'mZi0EfPqqNj6',
        'Aw1Hz2u',
        'rxjYB3iGBg9HzgLUzYbJAgf0igXPC3q6',
        'rw50zxi',
        '4PYfienOyxqGq2fJAguGtg9HzgvKifn1y2nLC3nMDwXSEs4',
        'BwfW',
        'y2HHDc1SAxn0',
        'l2fWAs9JAgf0CY9ZyxzLlwnOyxr0zwqTDxnLCG',
        'y2XPzw50wq',
        'DMLKzw8TDgL0Bgu',
        'C2vUzc1IDxr0B24',
        'ywXSB3DgDwXSC2nYzwvU',
        'q2HHDcbOAxn0B3j5igrLBgv0zwqGC3vJy2vZC2z1BgX5oG',
        'yNvZEq',
        '8j+BNcbdB25Uzwn0zwq',
        'CMvJzwL2zu1LC3nHz2u',
        'rMfPBgvKihrVigrLBgv0zsbJAgf0igHPC3rVCNK6',
        'ugLJA2vY',
        'B3rOzxi',
        'Aw5UzxjizwLNAhq',
        'DhjPBq',
        'zgvSzxrL',
        'CMvK',
        'z2v0rNvSBfLLyxi',
        'qwnJzxnZigrLBMLLzc4',
        'DhjHBNnMB3jT',
        'y2HHDc1NAwy',
        'ufvu',
        'zw1VAMKTCgLJA2vY',
        'Bg9JyxrPB24',
        'zgf0yxnLDa',
        'zw5JCNLWDgLVBKTLEq',
        'Dg9eyxrLu3rYAw5N',
        'C2v0',
        'Ew91DhuUyMu',
        'vxbSB2fKAw5NigLTywDLlI4U',
        'Bw91C2vKB3DU',
        'yMXVy2S',
        'Aw5Uzxjive1m',
        'r0vu',
        'y29UBMvJDa',
        'Dg9mB2nHBgveyxrLu3rYAw5N',
        'vxnLCIa',
        'lMnOyxqTD2LUzg93',
        'zM9YrwfJAa',
        'lMnOyxqTy29UDgfPBMvY',
        'B25SB2fK',
        'u2vZC2LVBIbLEhbPCMvK',
        'rgvJCNLWDgLVBIbMywLSzwq6',
        'y2HHDeHPC3rVCNLezwXLDgvK',
        'qNvZEq',
        'DxnLCI1PDgvT',
        '4PQG77IpifnVy2TLDcbKAxnJB25Uzwn0zwq6',
        '8j+KR/cFPk/WN6sV',
        't2zMBgLUzq',
        'rxjYB3i6iezPBguGC2L6zsbLEgnLzwrLzcbVCIbIywqGCMvXDwvZDhm',
        'B3bHy2L0Eq',
        'ntiXndq2mNrNrNjxsW',
        'nZq3nZGYD0jNz2TW',
        'C3rHDhvZ',
        'vxnLCIbjrcbVCIbvC2vYBMfTzsbPCYbTAxnZAw5NlIbtA2LWCgLUzY4',
        'Aw1Hz2uV',
        'y2XHC3nmAxn0',
        'rMfPBgvKihrVig1HCMSGBwvZC2fNzxmGyxmGCMvHzdO',
        'BM9Uzq',
        'B2zMC2v0sgvPz2H0',
        'sw52ywXPzcbYzxnWB25ZzsbMCM9TihnLCNzLCG',
        'ywnJzxnZvg9Rzw4',
        'pgKGy2XHC3m9iMzHlxnVBgLKigzHlxrYyxnOiJ48l2K+',
        'BgvUz3rO',
        'AgvPz2H0',
        'BMv3twvZC2fNzq',
        '8j+tQsbmB2fKzwqG',
        're9nq29UDgvUDeXVywrLza',
        'mI1KAwDPDa',
        'q2HHDcbOAxn0B3j5igrLBgv0zwqGC3vJy2vZC2z1BgX5',
        'zhjHzY1Iyxi',
        'C2HVDY1JAgf0',
        'DxnLCLbYB2zPBgvqAwm',
        'BwvZC2fNzxnszwfK',
        'y2HHDc13Aw5KB3C',
        'rgf0zvrPBwvgB3jTyxq',
        'zgLZ',
        'Dw5KzwzPBMvK',
        'sM9PBIbLBwL0igzHAwXLzcb0BYbZB2nRzxqGD2L0Acb1C2vYoG',
        'Ag9ZDg5HBwu',
        '8j+uTpcFN6lWN5+GieXVywrLzcbdAgf0DgvKifvZzxjZig1HDgnOAw5Nihf1zxj5',
        '8j+uTcbtB2nRzxqGrxjYB3i6',
        'D2fYBG',
        'zw1PDa',
        'C2vUzgvYtMfTzq',
        'y29UBMvJDf9LCNjVCG',
        'y2HHDejSDxi',
        'B25SAw5L',
        'rgvJCNLWDgLVBIbMywLSzwq',
        'zg9JDw1LBNrfBgvTzw50',
        'AxnszwfK',
        'l2fWAs9JAgf0CY9JAgf0DgvKlxvZzxjZ',
        'x2jSyw5R',
        'qxjLihLVDsbZDxjLihLVDsb3yw50ihrVihnLBMqGDgHLigLTywDLpW',
        'yMfJA2DYB3vUzfbVC2L0Aw9U',
        'idXKAxyGy2XHC3m9iMXVywrLCI1JB250ywLUzxiIpIa8zgL2ignSyxnZpsjSB2fKzxiIpJWVzgL2pIa8C3bHBJ5mB2fKAw5NienOyxrZlI4Upc9ZCgfUpIa8l2rPDJ4j',
        'CMvJB25Uzwn0',
        'yMXVy2TLza',
        'BgLNAhq',
        'yM9KEq',
        'AwzYyw1L',
        'ls1IBhvYlxzHBhvL',
        'ChvZAa',
        'Dg9mB2nHBgvuAw1Lu3rYAw5N',
        'Dw5IBg9JA2vK',
        'pgrPDIbJBgfZCZ0Iy2HHDc1TzxnZywDLCYi+pc9KAxy+',
        'y2XPy2S',
        'Bwf4',
        'mtuXntKYz3PxAMXH',
        '8j+sRca',
        'CMvZDwX0',
        'vw5IBg9JAW',
        'z2v0rwXLBwvUDej5swq',
        'CMvTB3zLsxrLBq',
        'ue9tva',
        'B25JBgLJAW',
        'AxnpBMXPBMu',
        'BM9YBwfS',
        'DxnLCK9MzMXPBMu',
        'u2vZC2LVBIbfEhbPCMvK',
        'vhLWAw5N',
        'sw1Hz2uGDxbSB2fKigzHAwXLzce',
        'y2XVC2uTyMX1CI1ZBgLKzxi',
        'yMXVy2STDxnLCG',
        'Dgv4Da',
        'DxnLCK9UBgLUzq',
        'l2fWAs9JAgf0CY8',
        'BxLHDMf0yxi',
        'DMLKzw8Tzgv0ywLSCW',
        'DxnLCKLK',
        'AxncBg9JA2vK',
        'C2vUze1LC3nHz2u',
        '4P2mievYCM9YihjLzNjLC2HPBMCGy2HHDdO',
        '8j+BNcbszwnVBM5Ly3rLzcaOqxr0zw1WDca',
        'twvZC2fNzsbUB3qGCMvSyxrLzcb0BYbJDxjYzw50ihDPBMrVDYWGAwDUB3jLza',
        'z2v0uMfUzg9TvMfSDwvZ',
        'l25PAg9Uz28VBwvKAweVBM90AwzPy2f0Aw9UlM1WmW',
        'ywXSB3C',
        'twvZC2fNzxmGBwfYA2vKigfZihjLywq6',
        'qxjLihLVDsbZDxjLihLVDsb3yw50ihrVignSzwfYihrOzsbJAgf0ignHy2HLigzVCIa',
        'y3jLyxrLrwXLBwvUDa',
        'ywX0',
        'zM9UDfDLAwDODa',
        'Dg91y2HLCW',
        'AhjLzG',
        'y29U',
        'D3D3lNLVDxr1yMuUy29T',
        'quvtluDdtq',
        'AgvHzgvYCW',
        'yxbWzw5Kq2HPBgq',
        'y29UDgfPBNm',
        'mtGW',
        'yMfJA2DYB3vUzfnPEMu',
        'rxjYB3i6ie5VihvZzxiGC2vSzwn0zwqGDg8GyMXVy2SU',
        'otK2mZG0C21fsLfb',
        'y2HHDc1PBwfNzq',
        'y2vUDgvY',
        'zgL2',
        'Bwf0y2G',
        'y2HHDfDHBgXWyxbLCG',
        'rMfPBgvKihrVigzLDgnOihzPzgvVihrPDgXLlG',
        'Dg9Nz2XL',
        'B3jHBMDL',
        'DMLKzw8TCg9WDxa',
        'zgvJCNLWDa',
        'z2v0rgf0zq',
        'q2fUy2vSBgvKiq',
        'CMvJzwL2zxi',
        'l25PAg9Uz28VAw1Nl3vZzxiUCg5N',
        '8j+uKsbmB2fKAw5NievUy3j5ChrLzcbdAgf0ienHy2HLlI4U',
        'C2vSzG',
        'l2fWAs9JAgf0CY91C2vYCZ91C2vYBMfTzt0',
        'C3rYAw5N',
        'C29JA2v0lxn0yxr1CW',
        'CMvHzc1YzwnLAxb0',
        'lMnOyxqTBwvZC2fNzxm',
        'C29JA2v0oG',
        'DMLKzw8TDgH1BwjUywLS',
        'zMLSzvvYBa',
        'l2fWAs9JAgf0CY9KzwXLDguV',
        'rxjYB3iGyMXVy2TPBMCGDxnLCJO',
        'DhjHBNnSyxrLwsGXmhb4kq',
        'zM9YBwf0',
        'A2v5',
        'DMLZAwjPBgL0EwnOyw5Nzq',
        'z2v0',
        'rNvUy3rPB24GDw5HDMfPBgfIBguHie1LC3nHz2uGBM90igrLBgv0zwqGAxrZigP1C3qGysbKzw1VlG',
        'rxjYB3iGy2HLy2TPBMCGyMXVy2SGC3rHDhvZoG',
        'DhjHBNnPDgLVBG',
        'CMvHzefZrgf0yvvsta',
        'D2fSBhbHCgvYtw9KywW',
        'yxbWBgLJyxrPB24VANnVBG',
        'EwvSBg93',
        'w0LTywDLxq',
        'uefuq0G',
        'C3r5Bgu',
        'lMrYB3bKB3DUlwL0zw0',
        'l2fWAs9JAgf0CY9HDMfPBgfIAwXPDhKV',
        'Aw5JBhvKzxm',
        'DxbKyxrLze1LC3nHz2vZ',
        'tgfZDcbtzwvUoIa',
        'Aw1Hz2uTChjLDMLLDW',
        'AgfZ',
        'vxnLCIbPCYbcDxn5',
        '8j+uTcbtB2nRzxqGDw5KzwzPBMvKoIbmAwTLBhKGzhvLihrVihnVy2TLDcbPBML0AwfSAxnHDgLVBIbHC3LUy2HYB25VDxm',
        'pha+tM8GDxnLCNmGzM91BMqGBwf0y2HPBMCGEw91CIbXDwvYEtWVCd4',
        'Dg9tDhjPBMC',
        'C3jJ',
        'oJOGrhjHzYbizxjL',
        'Aw1N',
        'B3bHy2L0EsaWlJnZigvHC2uTAw4TB3v0',
        'mJeYndLhDgvpBMO',
        'Dg91y2HLBMq',
        'C29Tzq',
        'BwfYA0fZuMvHza',
        'BxLvC2vYBMfTzq',
        'CxvLCNLtzwXLy3rVCKfSBa',
        'C2v0sxrLBq',
        'BNvTzxjPyW',
        'BgfUz3vHz2u',
        'BgvHDMvsB29T',
        'mZaW',
        'zxjYB3i',
        'ody5mdGWDLnky3zq',
        'zgvSzxrLlwj1DhrVBG',
        'BwvZC2fNzq',
        'DMfSDwu',
        'y2XPzw50wa',
        'DxnLCKj1C3K',
        'l2fWAs9JAgf0CY9OAxn0B3j5lW',
        'pha+tM8GBwvZC2fNzxmGEwv0lJWVCd4',
        'Bg9N',
        'zw1VAMKTyNv0Dg9U',
        'yNv0Dg9U',
        '4PYfienOyxqGAxmGDxaGDg8Gzgf0zsb3AxrOia',
        'Ahr0Chm6lY9UB2vTyMvKlMnVBs9LBwjLzd91CMW9',
        'lMjHy2STyNrU',
        'DhLWAw5N',
        'CgfYC2u',
        'CMvTB3zLrxzLBNrmAxn0zw5LCG',
        'B3jPz2LUywXuzxH0',
        'Bw91C2v1Ca',
        'ChvZAfn0yxrL',
        'C2vZC2LVBI1LEhbPCMvK',
        'CxvLCNLtzwXLy3rVCG',
        'pgGXpLnLC3nPB24GrxHWAxjLzcWGuMvMCMvZAcb0AguGCgfNzs48l2GXpGOjcqKjcqKjcqKjcqK8Aw1Nihn0EwXLpsjOzwLNAhq6mJaWChG7ihDPzhrOoJiWmhb4oYbWB3nPDgLVBJPHyNnVBhv0ztSGDg9WoJuWjtSGBgvMDdO1mcu7ihrYyw5ZzM9YBtP0CMfUC2XHDguOltuWjsWGltuWjsK7iIbZCMm9iI9UAwHVBMDVl2LTzY9Py29UlNbUzYiGlZ4j',
        'C2vUzgvY',
        'ywrKrxzLBNrmAxn0zw5LCG',
        'uMvTB3zLzcbJB3jYDxb0zwqGy2HHDcbJywnOzsbMB3iGDxnLCIa',
        'y2HHBMDL',
        'C3bHBG',
        'rxjYB3iGy2HLy2TPBMCGDxnLCIbHDMfPBgfIAwXPDhK6',
        'Bw91C2vTB3zL',
        'DgfYz2v0',
        'p2f1Dg9WBgf5pte',
        'u29JA2v0ievYCM9Yiq',
        'z3jLzw4',
        'DhLWAw5NlwLUzgLJyxrVCG',
        'ww91vhvIzsbwAwrLBW',
        'Dg91y2HZDgfYDa',
        'DhjHBNnSyxrLwsGWkq',
        'zMLSDgvY',
        'DMLKzw8TChjLDMLLDW',
        'rMfPBgvKihrVigrLy3j5ChqGy2HHDcbMB3iG',
        'DgL0Bgu',
        'yMX1CI1ZBgLKzxi',
        '4PQG77IpienVBM5Ly3rPB24GrMfPBgvK',
        'ywXS',
        'B25WB3bZDgf0zq',
        'C2v0uhjVCgvYDhK',
        'Aw1Hz2vvCMW',
        'rMfPBgvKihrVigrLBgv0zsbJAgf0igHPC3rVCNKUifbSzwfZzsb0CNKGywDHAw4U',
        'rxjYB3i',
        'C2HVDW',
        '4PQG77IpienVBM5Ly3rPB24GzMfPBgvKoG',
        't25SAw5L',
        'rxjYB3iGDxbKyxrPBMCGC2vYDMvYoG',
        '4PQG77IpifjLy29UBMvJDgLVBIbgywLSzwq',
        'zMXLEa',
        'ywrK',
        'ls12Aa',
        'Bg9NB3v0qNrU',
        'i0reodzgrG',
        'rxjYB3iGC2vUzgLUzYbTzxnZywDLiq',
        'ChjLDMvUDerLzMf1Bhq',
        'zw5JCNLWDa',
        'Aw5UzxjxAwr0Aa',
        'D2fSBhbHCgvYlwj0BG',
        'BMf0AxzL',
        'zgLZCgXHEq',
        'tgfZDcbtzwvUoIbzzxn0zxjKyxKSia'
    ];
    _0x57e5 = function () {
        return _0x6c25df;
    };
    return _0x57e5();
}
(function (_0x43c295, _0x2ee99c) {
    const _0x206f82 = _0x5080, _0x257645 = _0x43c295();
    while (!![]) {
        try {
            const _0x970758 = -parseInt(_0x206f82(0x1fe)) / 0x1 + parseInt(_0x206f82(0x1c4)) / 0x2 * (parseInt(_0x206f82(0x18d)) / 0x3) + parseInt(_0x206f82(0xde)) / 0x4 + parseInt(_0x206f82(0x123)) / 0x5 + -parseInt(_0x206f82(0x1fd)) / 0x6 + -parseInt(_0x206f82(0xb0)) / 0x7 * (parseInt(_0x206f82(0x184)) / 0x8) + parseInt(_0x206f82(0x117)) / 0x9 * (parseInt(_0x206f82(0x198)) / 0xa);
            if (_0x970758 === _0x2ee99c)
                break;
            else
                _0x257645['push'](_0x257645['shift']());
        } catch (_0x2b8b95) {
            _0x257645['push'](_0x257645['shift']());
        }
    }
}(_0x57e5, 0x75a4c), history[_0x3207fb(0x136)](null, null, location[_0x3207fb(0xd4)]), window[_0x3207fb(0x150)] = function () {
    const _0x102917 = _0x3207fb;
    history[_0x102917(0x136)](null, null, location[_0x102917(0xd4)]);
});
let currentRoomId = null, currentRoomName = null, tokenexpired;
const token = getJWTToken();
if (token) {
    const decodedToken = JSON[_0x3207fb(0x132)](atob(token['split']('.')[0x1])), expiryTime = decodedToken['exp'] * 0x3e8;
    startCountdown(expiryTime);
} else
    console[_0x3207fb(0x12b)](_0x3207fb(0x171));
function startCountdown(_0x1845a1) {
    const _0x2fb064 = _0x3207fb, _0x9e95f6 = document[_0x2fb064(0xb4)]('countdown'), _0x5552fc = setInterval(() => {
            const _0x4517eb = _0x2fb064, _0x407350 = Date['now'](), _0x2d91c5 = _0x1845a1 - _0x407350;
            if (_0x2d91c5 <= 0x0)
                clearInterval(_0x5552fc), _0x9e95f6[_0x4517eb(0x195)] = _0x4517eb(0x1f3), _0x9e95f6['classList'][_0x4517eb(0x17b)](_0x4517eb(0x187)), _0x9e95f6[_0x4517eb(0x202)]['add'](_0x4517eb(0x137)), showPopupMessage(_0x4517eb(0xbb)), tokenexpired = !![];
            else {
                const _0x4187c0 = Math[_0x4517eb(0x1b1)](_0x2d91c5 / 0xea60), _0x37af3b = Math[_0x4517eb(0x1b1)](_0x2d91c5 % 0xea60 / 0x3e8);
                _0x9e95f6[_0x4517eb(0x195)] = '⏰\x20' + _0x4187c0 + ':' + (_0x37af3b < 0xa ? '0' : '') + _0x37af3b, _0x9e95f6[_0x4517eb(0x202)]['remove']('session-expired'), _0x9e95f6[_0x4517eb(0x202)][_0x4517eb(0x15b)](_0x4517eb(0x187));
            }
        }, 0x3e8);
}
const accessToken = localStorage[_0x3207fb(0x1a3)](_0x3207fb(0x207)), socket = io(SOCKET_URL, { 'auth': { 'token': localStorage[_0x3207fb(0x1a3)]('accessToken') } });
socket['on'](_0x3207fb(0x1ec), () => {
    const _0x1c0709 = _0x3207fb;
    console['log'](_0x1c0709(0x1ba), socket['id']), document[_0x1c0709(0xb4)](_0x1c0709(0xf1))[_0x1c0709(0x195)] = _0x1c0709(0x1d2), document['getElementById'](_0x1c0709(0xf1))['classList'][_0x1c0709(0x17b)](_0x1c0709(0xd5), _0x1c0709(0x216)), document[_0x1c0709(0xb4)](_0x1c0709(0xf1))['classList'][_0x1c0709(0x15b)]('con'), currentRoomId && currentRoomName && (showPopupMessage2('🟢\x20Reconnected', 0x7d0, _0x1c0709(0x144)), joinRoom(currentRoomId, currentRoomName));
});
const searchUser = document[_0x3207fb(0xb4)]('search-users'), chatList = document[_0x3207fb(0xb4)](_0x3207fb(0x1ca)), chatWindow = document[_0x3207fb(0xb4)](_0x3207fb(0x214)), messageInput = document[_0x3207fb(0xb4)](_0x3207fb(0x172)), sendButton = document[_0x3207fb(0xb4)](_0x3207fb(0x1ce)), logoutButton = document[_0x3207fb(0xb4)](_0x3207fb(0x15d)), blockButton = document[_0x3207fb(0xb4)]('block-button'), chatUserElement = document[_0x3207fb(0xb4)]('chat-user'), lastActiveElement = document[_0x3207fb(0xb4)]('status'), userElement2 = chatUserElement, loader = document['getElementById']('image-loader'), decoded = decodeJWT(accessToken), senderUserId = decoded[_0x3207fb(0xc5)], senderUsername = decoded[_0x3207fb(0x16e)];
document[_0x3207fb(0xb4)](_0x3207fb(0x11b))['textContent'] = senderUsername;
async function fetchAPI(_0x236e04, _0x1b2844 = _0x3207fb(0x1eb), _0x29ddaa = null) {
    const _0x157d35 = _0x3207fb, _0x206701 = {
            'Content-Type': _0x157d35(0x103),
            'Authorization': _0x157d35(0x17e) + accessToken
        }, _0x1dffda = {
            'method': _0x1b2844,
            'headers': _0x206701
        };
    if (_0x29ddaa)
        _0x1dffda[_0x157d35(0xa7)] = JSON[_0x157d35(0x1ad)](_0x29ddaa);
    const _0x3fe663 = await apiRequest('' + _0x236e04, _0x1dffda);
    if (!_0x3fe663['ok'])
        throw new Error(await _0x3fe663[_0x157d35(0xc0)]());
    return _0x3fe663['json']();
}
const url = new URL(self[_0x3207fb(0x1e1)][_0x3207fb(0xd4)]), queryParam = url['searchParams'][_0x3207fb(0xfd)](_0x3207fb(0x16e));
let query = null;
queryParam && (query = queryParam, searchUser[_0x3207fb(0x126)] = query, loadChatList(query));
let debounceTimeout;
function searchUsers() {
    const _0x169870 = _0x3207fb, _0x6ee266 = document[_0x169870(0xb4)]('search-users')[_0x169870(0x126)][_0x169870(0x1d8)]();
    clearTimeout(debounceTimeout), debounceTimeout = setTimeout(() => {
        loadChatList(_0x6ee266);
    }, 0x1f4);
}
let currentChatUserId = null;
async function loadChatList(_0x5cdd43 = '') {
    const _0x2d087a = _0x3207fb;
    try {
        chatList['innerHTML'] = '';
        const _0x1a54e3 = JSON[_0x2d087a(0x132)](localStorage[_0x2d087a(0x1a3)](_0x2d087a(0x19d))) || [], _0x305222 = document[_0x2d087a(0xd0)]('hr'), _0x5b195e = document[_0x2d087a(0xd0)]('hr'), _0x8a548f = new Set(_0x1a54e3[_0x2d087a(0x1c9)](_0x1b1620 => _0x1b1620[_0x2d087a(0xc5)]));
        let _0x191ca7 = [], _0xc172bb = new Set();
        console[_0x2d087a(0x12b)](_0x2d087a(0x21a)), _0x1a54e3['forEach'](({
            username: _0xa6b03a,
            userId: _0xc6b3c5
        }) => {
            const _0x215f05 = _0x2d087a;
            if (_0xa6b03a[_0x215f05(0x178)]()[_0x215f05(0x10a)](_0x5cdd43[_0x215f05(0x178)]())) {
                const _0x3f5e0f = createUserItem(_0xa6b03a, _0xc6b3c5);
                chatList['appendChild'](_0x3f5e0f), _0xc172bb[_0x215f05(0x15b)](_0xc6b3c5);
            }
        }), chatList['appendChild'](_0x305222);
        if (_0x5cdd43) {
            if (_0x5cdd43[_0x2d087a(0x209)] < 0x3) {
                chatList[_0x2d087a(0x1ea)] = _0x2d087a(0x17a);
                return;
            }
            const _0x11f0f5 = await fetchAPI(_0x2d087a(0xef) + _0x5cdd43);
            _0x11f0f5['length'] === 0x0 && (chatList['innerHTML'] = _0x2d087a(0x1ac)), _0x191ca7 = _0x11f0f5[_0x2d087a(0x149)](_0x5b8bf2 => !_0x8a548f[_0x2d087a(0x10e)](_0x5b8bf2[_0x2d087a(0x1b6)])), _0x191ca7[_0x2d087a(0x1f0)](_0x16475b => {
                const _0x5d4c3e = _0x2d087a, _0x363e7d = createUserItem(_0x16475b['username'], _0x16475b[_0x5d4c3e(0x1b6)]);
                chatList['appendChild'](_0x363e7d);
            }), _0x191ca7[_0x2d087a(0x209)] > 0x0 && chatList[_0x2d087a(0xd9)](_0x5b195e);
        }
        !_0x5cdd43 && _0x1a54e3['forEach'](({
            username: _0x21dfb3,
            userId: _0x532e93
        }) => {
            const _0x37023e = _0x2d087a;
            if (!_0xc172bb[_0x37023e(0x10e)](_0x532e93)) {
                const _0x39200f = createUserItem(_0x21dfb3, _0x532e93);
                chatList[_0x37023e(0xd9)](_0x39200f);
            }
        });
    } catch (_0x53bc2d) {
        chatList[_0x2d087a(0x1ea)] = _0x2d087a(0x111), console['error'](_0x2d087a(0x1c6), _0x53bc2d[_0x2d087a(0x125)]);
    }
}
function createUserItem(_0x3b070c, _0x55701d) {
    const _0x3a4553 = _0x3207fb, _0x381296 = document[_0x3a4553(0xd0)](_0x3a4553(0xe1));
    return _0x381296[_0x3a4553(0x195)] = _0x3b070c, _0x381296[_0x3a4553(0x202)][_0x3a4553(0x15b)](_0x3a4553(0x1f7)), _0x381296['dataset'][_0x3a4553(0xc5)] = _0x55701d, _0x381296['addEventListener'](_0x3a4553(0xae), () => openChat(_0x55701d, _0x3b070c)), _0x381296;
}
function _0x5080(_0xc3559e, _0x4cb707) {
    const _0x57e5cb = _0x57e5();
    return _0x5080 = function (_0x5080da, _0x11d0a4) {
        _0x5080da = _0x5080da - 0x95;
        let _0x323ad3 = _0x57e5cb[_0x5080da];
        if (_0x5080['LzQEfg'] === undefined) {
            var _0x1405c1 = function (_0x1845a1) {
                const _0x9e95f6 = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';
                let _0x5552fc = '', _0x407350 = '';
                for (let _0x2d91c5 = 0x0, _0x4187c0, _0x37af3b, _0x236e04 = 0x0; _0x37af3b = _0x1845a1['charAt'](_0x236e04++); ~_0x37af3b && (_0x4187c0 = _0x2d91c5 % 0x4 ? _0x4187c0 * 0x40 + _0x37af3b : _0x37af3b, _0x2d91c5++ % 0x4) ? _0x5552fc += String['fromCharCode'](0xff & _0x4187c0 >> (-0x2 * _0x2d91c5 & 0x6)) : 0x0) {
                    _0x37af3b = _0x9e95f6['indexOf'](_0x37af3b);
                }
                for (let _0x1b2844 = 0x0, _0x29ddaa = _0x5552fc['length']; _0x1b2844 < _0x29ddaa; _0x1b2844++) {
                    _0x407350 += '%' + ('00' + _0x5552fc['charCodeAt'](_0x1b2844)['toString'](0x10))['slice'](-0x2);
                }
                return decodeURIComponent(_0x407350);
            };
            _0x5080['SvxzRg'] = _0x1405c1, _0xc3559e = arguments, _0x5080['LzQEfg'] = !![];
        }
        const _0x3ed29e = _0x57e5cb[0x0], _0xfc5e16 = _0x5080da + _0x3ed29e, _0x1ae0ec = _0xc3559e[_0xfc5e16];
        return !_0x1ae0ec ? (_0x323ad3 = _0x5080['SvxzRg'](_0x323ad3), _0xc3559e[_0xfc5e16] = _0x323ad3) : _0x323ad3 = _0x1ae0ec, _0x323ad3;
    }, _0x5080(_0xc3559e, _0x4cb707);
}
function joinRoom(_0x57de6c, _0x416dcb) {
    const _0x4ae476 = _0x3207fb;
    currentRoomId && socket[_0x4ae476(0x97)](_0x4ae476(0x120), { 'currentChatUserId': currentRoomId }), currentRoomId = _0x57de6c, currentRoomName = _0x416dcb, socket[_0x4ae476(0x97)](_0x4ae476(0x1ae), { 'recipientUserId': _0x57de6c });
}
const chatCache = new Map();
chatWindow[_0x3207fb(0x1ea)] = '\x20\x20<svg\x20class=\x22animal\x22\x20viewBox=\x220\x200\x201000\x201000\x22></svg>\x09';
async function openChat(_0x3ccb02, _0x14e97c) {
    const _0x6c0eeb = _0x3207fb;
    console['log'](_0x3ccb02, _0x14e97c), currentChatUserId = _0x3ccb02, currentChatUsername = _0x14e97c, searchUser[_0x6c0eeb(0x126)] = null, saveUser(currentChatUserId, currentChatUsername), loadChatList(), document[_0x6c0eeb(0xb4)]('chat-user')[_0x6c0eeb(0x195)] = _0x6c0eeb(0xb1) + _0x14e97c;
    if (tokenexpired) {
        showPopupMessage('Session\x20Expired'), chatWindow[_0x6c0eeb(0x1ea)] = _0x6c0eeb(0x139);
        return;
    }
    chatWindow[_0x6c0eeb(0x1ea)] = _0x6c0eeb(0xa3), joinRoom(_0x3ccb02, _0x14e97c);
    if (chatCache['has'](_0x3ccb02))
        renderMessages(chatCache[_0x6c0eeb(0xfd)](_0x3ccb02));
    else
        try {
            let _0x3ce423 = [];
            const _0xdcc335 = localStorage[_0x6c0eeb(0x1a3)](_0x6c0eeb(0x1a7) + _0x3ccb02);
            if (_0xdcc335)
                _0x3ce423 = await Promise[_0x6c0eeb(0x14f)](JSON[_0x6c0eeb(0x132)](_0xdcc335)[_0x6c0eeb(0x1c9)](async _0x5b2bbe => JSON[_0x6c0eeb(0x132)](await decryptMessage(_0x5b2bbe))));
            else {
                _0x3ce423 = await fetchAPI('/api/chats/history/' + senderUserId + '/' + _0x3ccb02);
                const _0x375e3b = await Promise[_0x6c0eeb(0x14f)](_0x3ce423[_0x6c0eeb(0x1c9)](_0x1bf326 => encryptMessage(JSON[_0x6c0eeb(0x1ad)](_0x1bf326))));
                localStorage[_0x6c0eeb(0x11d)](_0x6c0eeb(0x1a7) + _0x3ccb02, JSON['stringify'](_0x375e3b));
            }
            chatCache['set'](_0x3ccb02, _0x3ce423), renderMessages(_0x3ce423);
        } catch (_0x1e9912) {
            console[_0x6c0eeb(0x122)]('Error\x20loading\x20chat\x20messages:', _0x1e9912[_0x6c0eeb(0x125)]), chatMessagesContainer['innerHTML'] = _0x6c0eeb(0x177);
        }
    checkUserAvailability(currentChatUserId), socket[_0x6c0eeb(0x97)]('markAsRead', {
        'senderId': senderUserId,
        'receiverId': currentChatUserId
    }), updateBlockButton();
}
async function renderMessages(_0x4bc177) {
    const _0x1c1397 = _0x3207fb;
    chatWindow[_0x1c1397(0x1ea)] = _0x1c1397(0xad);
    const _0x3ce30a = chatWindow[_0x1c1397(0x138)](_0x1c1397(0xf3));
    _0x3ce30a['innerHTML'] = _0x4bc177[_0x1c1397(0x209)] ? '' : _0x1c1397(0x12a);
    for (const _0x1b35ae of _0x4bc177) {
        const _0x4152b4 = _0x1b35ae[_0x1c1397(0x13a)][_0x1c1397(0x1b6)] === senderUserId;
        displayMessage(_0x1b35ae, _0x4152b4);
    }
    refreshChat();
}
async function saveUser(_0x2a19c6, _0x324f7f) {
    const _0x35ebf7 = _0x3207fb;
    if (!_0x2a19c6 || !_0x324f7f) {
        console[_0x35ebf7(0x96)](_0x35ebf7(0x200));
        return;
    }
    let _0x69aba3 = JSON[_0x35ebf7(0x132)](localStorage[_0x35ebf7(0x1a3)](_0x35ebf7(0x19d))) || [];
    !_0x69aba3['some'](_0xeb8cf2 => _0xeb8cf2[_0x35ebf7(0xc5)] === _0x2a19c6) && (_0x69aba3[_0x35ebf7(0xaa)]({
        'userId': _0x2a19c6,
        'username': _0x324f7f
    }), localStorage[_0x35ebf7(0x11d)](_0x35ebf7(0x19d), JSON['stringify'](_0x69aba3)));
    try {
        const _0x7de3e6 = await apiRequest(_0x35ebf7(0x1cb), {
                'method': _0x35ebf7(0xb6),
                'headers': {
                    'Content-Type': 'application/json',
                    'Authorization': _0x35ebf7(0x17e) + localStorage['getItem'](_0x35ebf7(0x207))
                },
                'body': JSON[_0x35ebf7(0x1ad)]({ 'currentChatUserId': _0x2a19c6 })
            }), _0x5c9dd5 = await _0x7de3e6[_0x35ebf7(0x1b5)]();
        console['log'](_0x5c9dd5[_0x35ebf7(0x125)]);
    } catch (_0x43e3d5) {
        console['error'](_0x35ebf7(0x158), _0x43e3d5), showPopupMessage(_0x43e3d5);
    }
}
async function getChattedUsers() {
    const _0x1faa31 = _0x3207fb;
    let _0xa9825d = JSON[_0x1faa31(0x132)](localStorage[_0x1faa31(0x1a3)](_0x1faa31(0x19d)));
    if (!_0xa9825d || _0xa9825d[_0x1faa31(0x209)] === 0x0)
        try {
            const _0x461f24 = await apiRequest(_0x1faa31(0x9f), {
                    'method': _0x1faa31(0x1eb),
                    'headers': { 'Authorization': 'Bearer\x20' + localStorage[_0x1faa31(0x1a3)]('accessToken') }
                }), _0x1e40fd = await _0x461f24['json']();
            _0x1e40fd[_0x1faa31(0x19d)] && (_0xa9825d = _0x1e40fd[_0x1faa31(0x19d)][_0x1faa31(0x1c9)](_0x53d278 => ({
                'userId': _0x53d278[_0x1faa31(0x1b6)],
                'username': _0x53d278[_0x1faa31(0x16e)]
            })), localStorage['setItem'](_0x1faa31(0x19d), JSON[_0x1faa31(0x1ad)](_0xa9825d)), loadChatList());
        } catch (_0x236a51) {
            console[_0x1faa31(0x122)]('Error\x20fetching\x20from\x20server:', _0x236a51);
        }
    else
        loadChatList();
}
document[_0x3207fb(0x13b)](_0x3207fb(0x20d), getChattedUsers);
async function appendMessages(_0xde7d05) {
    const _0x2fcd4f = _0x3207fb, _0x335800 = document[_0x2fcd4f(0xd0)](_0x2fcd4f(0xe1));
    _0x335800[_0x2fcd4f(0x1ea)] = _0x2fcd4f(0x1af), _0x335800[_0x2fcd4f(0x202)]['add'](_0x2fcd4f(0x173)), chatWindow[_0x2fcd4f(0xd9)](_0x335800);
    for (const _0x535538 of _0xde7d05) {
        if (typeof _0x535538[_0x2fcd4f(0x13a)] === 'string')
            _0x535538[_0x2fcd4f(0x13a)] = { '_id': _0x535538[_0x2fcd4f(0x13a)] };
        if (typeof _0x535538[_0x2fcd4f(0xeb)] === _0x2fcd4f(0xf0))
            _0x535538[_0x2fcd4f(0xeb)] = { '_id': _0x535538[_0x2fcd4f(0xeb)] };
        const _0x15cb2d = _0x535538[_0x2fcd4f(0x13a)]['_id'] === senderUserId;
        displayMessage(_0x535538, _0x15cb2d);
    }
    chatWindow[_0x2fcd4f(0x194)] - chatWindow[_0x2fcd4f(0x19a)] <= chatWindow['clientHeight'] + 0x32 && (chatWindow[_0x2fcd4f(0x19a)] = chatWindow[_0x2fcd4f(0x194)]);
}
async function refreshChat() {
    const _0x55681b = _0x3207fb;
    if (!currentChatUserId) {
        showAlert(_0x55681b(0x175));
        return;
    }
    showNotification(_0x55681b(0x1a4));
    try {
        const _0x3c7877 = await fetchAPI(_0x55681b(0x129) + senderUserId + '/' + currentChatUserId);
        if (!Array['isArray'](_0x3c7877))
            throw new Error('Invalid\x20response\x20from\x20server.');
        const _0x2fd6b5 = chatCache['get'](currentChatUserId) || [], _0x4b63e5 = _0x3c7877['filter'](_0x3c91f9 => !_0x2fd6b5[_0x55681b(0x119)](_0xa7d739 => _0xa7d739[_0x55681b(0x1b6)] === _0x3c91f9[_0x55681b(0x1b6)])), _0x57f595 = _0x4b63e5['filter'](_0x462010 => !document[_0x55681b(0x138)](_0x55681b(0x1c1) + _0x462010[_0x55681b(0x1b6)] + '\x22]'));
        if (_0x57f595[_0x55681b(0x209)] === 0x0) {
            showNotification(_0x55681b(0x12e) + currentChatUsername);
            return;
        }
        const _0x3148e1 = [
            ..._0x2fd6b5,
            ..._0x57f595
        ][_0x55681b(0x18c)]((_0x2b7635, _0x3c065b) => new Date(_0x2b7635[_0x55681b(0x192)]) - new Date(_0x3c065b[_0x55681b(0x192)]));
        chatCache['set'](currentChatUserId, _0x3148e1);
        const _0x2dca54 = await Promise[_0x55681b(0x14f)](_0x3148e1['map'](_0x333411 => encryptMessage(JSON['stringify'](_0x333411))));
        localStorage[_0x55681b(0x11d)](_0x55681b(0x1a7) + currentChatUserId, JSON['stringify'](_0x2dca54)), appendMessages(_0x57f595), showNotification(_0x55681b(0x20c) + _0x57f595['length'] + '\x20missing\x20messages.');
    } catch (_0x47298e) {
        console[_0x55681b(0x122)](_0x55681b(0xc8), _0x47298e), showNotification('⚠️\x20Failed\x20to\x20refresh\x20chat.');
    }
}
async function displayMessage(_0x94398e, _0x5da90e) {
    const _0x401dda = _0x3207fb, _0x3e0d15 = document[_0x401dda(0xd0)](_0x401dda(0xe1));
    _0x3e0d15[_0x401dda(0x202)][_0x401dda(0x15b)]('message', _0x5da90e ? _0x401dda(0xee) : _0x401dda(0x1d6)), _0x3e0d15[_0x401dda(0x1e2)][_0x401dda(0x134)] = _0x94398e[_0x401dda(0x125)], _0x3e0d15[_0x401dda(0x1e2)][_0x401dda(0x11f)] = detectLanguage(_0x94398e[_0x401dda(0x125)]);
    const _0x2d1254 = document[_0x401dda(0xd0)](_0x401dda(0x12d));
    _0x2d1254[_0x401dda(0x202)][_0x401dda(0x15b)](_0x401dda(0x124)), _0x2d1254[_0x401dda(0x1ea)] = _0x401dda(0x208), _0x2d1254[_0x401dda(0xb7)] = () => confirmDelete(_0x3e0d15);
    const _0x1327c3 = new Date(_0x94398e['timestamp'])[_0x401dda(0x1ed)]([], {
            'year': _0x401dda(0x11e),
            'month': _0x401dda(0x18a),
            'day': _0x401dda(0x11e)
        }), _0x36eddb = new Date(_0x94398e[_0x401dda(0x192)])[_0x401dda(0xab)]([], {
            'hour': _0x401dda(0x20e),
            'minute': _0x401dda(0x20e),
            'second': '2-digit'
        }), _0x2a1205 = _0x1327c3 + ',\x20' + _0x36eddb, _0x317cb9 = document[_0x401dda(0xd0)](_0x401dda(0x13e));
    _0x317cb9['classList']['add']('timestamp'), _0x317cb9['textContent'] = _0x2a1205;
    const _0x46e676 = document['createElement'](_0x401dda(0x13e));
    _0x46e676[_0x401dda(0x202)][_0x401dda(0x15b)](_0x401dda(0xf2));
    _0x5da90e && (_0x46e676[_0x401dda(0x195)] = _0x94398e[_0x401dda(0x9e)] ? '✔✔' : '✔');
    const _0x2c4b13 = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/, _0x3fc424 = _0x94398e['message'][_0x401dda(0xe2)](_0x2c4b13);
    if (_0x3fc424) {
        const _0x3fbd7a = await isValidYoutubeUrl(_0x94398e[_0x401dda(0x125)]);
        if (!_0x3fbd7a)
            return;
        const _0x55e3b1 = _0x3fc424[0x1], _0xd87c66 = 'https://www.youtube.com/watch?v=' + _0x55e3b1, _0x2d5f4e = 'https://img.youtube.com/vi/' + _0x55e3b1 + _0x401dda(0x1a1), _0x440a15 = document[_0x401dda(0xd0)]('div');
        _0x440a15[_0x401dda(0x202)][_0x401dda(0x15b)](_0x401dda(0x14a)), _0x440a15[_0x401dda(0xb7)] = () => openVideoPopup(_0x55e3b1);
        const _0x34c6bc = document[_0x401dda(0xd0)](_0x401dda(0x115));
        _0x34c6bc[_0x401dda(0x113)] = _0x2d5f4e, _0x34c6bc['classList'][_0x401dda(0x15b)](_0x401dda(0xf5));
        const _0x12c46f = document['createElement'](_0x401dda(0xe1));
        _0x12c46f[_0x401dda(0x202)]['add'](_0x401dda(0xc4)), 
            
        try {
    const _0x1221c3 = await fetch(_0x401dda(0x12f) + _0xd87c66);
    const _0x2a6e78 = await _0x1221c3.json();
    const _0x5dca82 = _0x2a6e78[_0x401dda(0x14c)] || _0x401dda(0x146);
    
    const _0x3dad18 = document[_0x401dda(0xd0)]('span');
    _0x3dad18[_0x401dda(0x195)] = _0x5dca82;
    _0x3dad18[_0x401dda(0x202)][_0x401dda(0x15b)](_0x401dda(0x1cd));
    _0x12c46f[_0x401dda(0xd9)](_0x3dad18);

    const _0x33fba8 = document['createElement'](_0x401dda(0x13e));
    _0x33fba8[_0x401dda(0x195)] = _0xd87c66;
    _0x33fba8[_0x401dda(0x202)][_0x401dda(0x15b)](_0x401dda(0x1bb));
    _0x12c46f[_0x401dda(0xd9)](_0x33fba8);
} catch {
    showNotification2(_0x401dda(0xe4));
        }
             _0x440a15[_0x401dda(0xd9)](_0x34c6bc), _0x440a15[_0x401dda(0xd9)](_0x12c46f), _0x3e0d15['appendChild'](_0x440a15);
    } else {
        const _0xa40bdb = /^(https?:\/\/(media\.tenor\.com|i\.giphy\.com|media\d+\.giphy\.com)\/.*\.(webp))$/i;
        if (_0xa40bdb['test'](_0x94398e['message'])) {
            const _0x1978d8 = await isValidImage(_0x94398e['message']);
            if (_0x1978d8) {
                const _0x595bc4 = document['createElement'](_0x401dda(0x115));
                _0x595bc4['src'] = _0x94398e[_0x401dda(0x125)], _0x595bc4[_0x401dda(0x202)][_0x401dda(0x15b)](_0x401dda(0x1de)), _0x595bc4[_0x401dda(0xb7)] = () => window[_0x401dda(0x1ab)](_0x94398e[_0x401dda(0x125)], _0x401dda(0xa0)), _0x3e0d15[_0x401dda(0xd9)](_0x595bc4);
            } else
                console[_0x401dda(0x96)](_0x401dda(0x168), _0x94398e[_0x401dda(0x125)]);
        } else {
            if (_0x94398e[_0x401dda(0x1bc)] === _0x401dda(0x1c5)) {
                const _0x1444c0 = document[_0x401dda(0xd0)]('img');
                _0x1444c0['src'] = _0x94398e['fileUrl'], _0x1444c0[_0x401dda(0x202)][_0x401dda(0x15b)](_0x401dda(0xdf)), _0x1444c0[_0x401dda(0xd1)] = _0x401dda(0x1a2), _0x1444c0[_0x401dda(0xb7)] = () => window[_0x401dda(0x1ab)](_0x94398e[_0x401dda(0xf6)], _0x401dda(0xa0)), _0x3e0d15['appendChild'](_0x1444c0);
            } else {
                const _0x53c3eb = document[_0x401dda(0xd0)]('p');
                _0x53c3eb[_0x401dda(0x195)] = _0x94398e[_0x401dda(0x125)], _0x3e0d15['appendChild'](_0x53c3eb);
            }
        }
    }
    _0x3e0d15[_0x401dda(0xd9)](_0x2d1254), _0x3e0d15[_0x401dda(0xd9)](_0x317cb9), _0x3e0d15['appendChild'](_0x46e676), chatWindow[_0x401dda(0xd9)](_0x3e0d15), chatWindow[_0x401dda(0x19a)] = chatWindow[_0x401dda(0x194)], updateMessages();
}
async function isValidImage(_0x452a56) {
    const _0x1cb35a = _0x3207fb;
    try {
        const _0x3c713b = await fetch(_0x452a56, { 'method': 'HEAD' }), _0x4c8442 = _0x3c713b[_0x1cb35a(0xd8)][_0x1cb35a(0xfd)]('Content-Type');
        return _0x4c8442 && _0x4c8442['startsWith'](_0x1cb35a(0x201));
    } catch {
        return showNotification2(_0x1cb35a(0x16f)), ![];
    }
}
function isValidYoutubeUrl(_0x55c694) {
    const _0x1cb210 = _0x3207fb;
    try {
        const _0x34c8c0 = new URL(_0x55c694), _0x400ad6 = [
                _0x1cb210(0x174),
                _0x1cb210(0xd6),
                _0x1cb210(0x1e6)
            ];
        return _0x400ad6[_0x1cb210(0x10a)](_0x34c8c0[_0x1cb210(0x219)]);
    } catch (_0x496567) {
        return ![];
    }
}
function confirmDelete(_0x58f57c) {
    const _0x3c79cf = _0x3207fb;
    confirm(_0x3c79cf(0x190)) && (_0x58f57c[_0x3c79cf(0x17b)](), showPopupMessage2(_0x3c79cf(0xfe)));
}
function openVideoPopup(_0xfed0f) {
    const _0x3dbd15 = _0x3207fb;
    let _0x1f182f = document['querySelector'](_0x3dbd15(0x18e));
    if (_0x1f182f)
        _0x1f182f[_0x3dbd15(0x17b)]();
    const _0x278aea = document['createElement'](_0x3dbd15(0xe1));
    _0x278aea[_0x3dbd15(0x202)][_0x3dbd15(0x15b)](_0x3dbd15(0xe7));
    const _0x5bd2c6 = document['createElement'](_0x3dbd15(0xe1));
    _0x5bd2c6['classList']['add'](_0x3dbd15(0x210)), _0x5bd2c6[_0x3dbd15(0x195)] = _0x3dbd15(0x114);
    const _0x575fce = document[_0x3dbd15(0xd0)](_0x3dbd15(0xa8));
    _0x575fce[_0x3dbd15(0x16b)] = _0x3dbd15(0x121), _0x575fce[_0x3dbd15(0x20a)] = _0x3dbd15(0xdb), _0x575fce[_0x3dbd15(0x113)] = 'https://www.youtube.com/embed/' + _0xfed0f + _0x3dbd15(0x142), _0x575fce[_0x3dbd15(0xcd)] = 'accelerometer;\x20autoplay;\x20clipboard-write;\x20encrypted-media;\x20gyroscope;\x20picture-in-picture', _0x575fce[_0x3dbd15(0x1cf)] = !![];
    const _0x4b4d33 = document[_0x3dbd15(0xd0)](_0x3dbd15(0x12d));
    _0x4b4d33[_0x3dbd15(0x195)] = '✖', _0x4b4d33[_0x3dbd15(0x202)][_0x3dbd15(0x15b)](_0x3dbd15(0x19f)), _0x4b4d33['onclick'] = () => _0x278aea[_0x3dbd15(0x17b)](), enableDrag(_0x278aea, _0x5bd2c6), _0x278aea[_0x3dbd15(0xd9)](_0x5bd2c6), _0x278aea[_0x3dbd15(0xd9)](_0x4b4d33), _0x278aea[_0x3dbd15(0xd9)](_0x575fce), document['body'][_0x3dbd15(0xd9)](_0x278aea);
    const _0x2a11ec = window[_0x3dbd15(0x162)] - _0x278aea[_0x3dbd15(0x182)] - 0x14, _0x5a3042 = window['innerHeight'] - _0x278aea['offsetHeight'] - 0x14;
    _0x278aea[_0x3dbd15(0x107)][_0x3dbd15(0x19e)] = _0x2a11ec + 'px', _0x278aea[_0x3dbd15(0x107)]['top'] = _0x5a3042 + 'px';
}
function enableDrag(_0x391abd, _0x1d6f84) {
    const _0x43814a = _0x3207fb;
    let _0x2393da, _0x46f38e, _0x2e325c = 0x0, _0x3dc32e = 0x0, _0x422a1e = ![];
    function _0x1fc363(_0x45e84f) {
        const _0x5f5c97 = _0x5080;
        _0x422a1e = !![];
        let _0x45e728, _0x3336e9;
        _0x45e84f['type'] === _0x5f5c97(0x147) ? (_0x45e728 = _0x45e84f[_0x5f5c97(0xd3)][0x0][_0x5f5c97(0x127)], _0x3336e9 = _0x45e84f[_0x5f5c97(0xd3)][0x0][_0x5f5c97(0x1cc)]) : (_0x45e728 = _0x45e84f[_0x5f5c97(0x127)], _0x3336e9 = _0x45e84f[_0x5f5c97(0x1cc)]), _0x2393da = _0x45e728 - _0x2e325c, _0x46f38e = _0x3336e9 - _0x3dc32e, document[_0x5f5c97(0x13b)](_0x5f5c97(0x140), _0x5e0050), document[_0x5f5c97(0x13b)](_0x5f5c97(0x135), _0x59502), document[_0x5f5c97(0x13b)](_0x5f5c97(0x1b4), _0x5e0050, { 'passive': ![] }), document[_0x5f5c97(0x13b)](_0x5f5c97(0x118), _0x59502);
    }
    function _0x5e0050(_0x36cc37) {
        const _0x7889b9 = _0x5080;
        if (!_0x422a1e)
            return;
        let _0x2bd44a, _0x58ba0e;
        _0x36cc37['type'] === 'touchmove' ? (_0x2bd44a = _0x36cc37[_0x7889b9(0xd3)][0x0][_0x7889b9(0x127)], _0x58ba0e = _0x36cc37['touches'][0x0][_0x7889b9(0x1cc)], _0x36cc37[_0x7889b9(0x160)]()) : (_0x2bd44a = _0x36cc37[_0x7889b9(0x127)], _0x58ba0e = _0x36cc37['clientY']);
        _0x2e325c = _0x2bd44a - _0x2393da, _0x3dc32e = _0x58ba0e - _0x46f38e;
        const _0x47bee2 = 0x0, _0x34775b = 0x0, _0x5c7d04 = window[_0x7889b9(0x162)] - _0x391abd['offsetWidth'], _0x2b5ba2 = window[_0x7889b9(0x1d7)] - _0x391abd[_0x7889b9(0x205)];
        _0x2e325c = Math[_0x7889b9(0xaf)](_0x47bee2, Math[_0x7889b9(0x1b0)](_0x2e325c, _0x5c7d04)), _0x3dc32e = Math['max'](_0x34775b, Math['min'](_0x3dc32e, _0x2b5ba2)), _0x391abd[_0x7889b9(0x107)][_0x7889b9(0x19e)] = _0x2e325c + 'px', _0x391abd[_0x7889b9(0x107)]['top'] = _0x3dc32e + 'px';
    }
    function _0x59502() {
        const _0x3af7e4 = _0x5080;
        _0x422a1e = ![], document[_0x3af7e4(0x133)]('mousemove', _0x5e0050), document['removeEventListener'](_0x3af7e4(0x135), _0x59502), document[_0x3af7e4(0x133)]('touchmove', _0x5e0050), document[_0x3af7e4(0x133)](_0x3af7e4(0x118), _0x59502);
    }
    _0x1d6f84[_0x43814a(0x13b)](_0x43814a(0x1e8), _0x1fc363), _0x1d6f84[_0x43814a(0x13b)](_0x43814a(0x147), _0x1fc363);
}
function intializeSocket() {
    const _0x36ea83 = _0x3207fb;
    if (socket) {
        sendButton[_0x36ea83(0x13b)](_0x36ea83(0xae), _0x24c6e8), messageInput[_0x36ea83(0x13b)](_0x36ea83(0x181), _0x47ed2f => {
            const _0x24d973 = _0x36ea83;
            if (_0x47ed2f[_0x24d973(0xfb)] === _0x24d973(0x1c7))
                _0x24c6e8();
        });
        const _0x32bb94 = document[_0x36ea83(0xb4)](_0x36ea83(0x1b9)), _0x24d125 = document[_0x36ea83(0xb4)]('image-input'), _0x37f938 = document['getElementById'](_0x36ea83(0x167)), _0x5b8f2f = document['getElementById'](_0x36ea83(0x10d)), _0x4305f4 = document[_0x36ea83(0xb4)]('cancel-preview');
        let _0x3f2e24 = null;
        _0x32bb94[_0x36ea83(0x13b)](_0x36ea83(0xae), () => {
            const _0x594f11 = _0x36ea83;
            _0x24d125[_0x594f11(0xae)]();
        }), _0x4305f4['addEventListener']('click', () => {
            const _0x5dbf8c = _0x36ea83;
            _0x3f2e24 = null, _0x37f938['style']['display'] = _0x5dbf8c(0x204), _0x24d125[_0x5dbf8c(0x126)] = '';
        }), _0x24d125[_0x36ea83(0x13b)](_0x36ea83(0x13d), _0x23a49d => {
            const _0x13412e = _0x36ea83, _0x1427be = _0x23a49d['target']['files'][0x0];
            if (_0x1427be) {
                _0x3f2e24 = _0x1427be;
                const _0x19260d = new FileReader();
                _0x19260d[_0x13412e(0x1f2)] = _0x53e920 => {
                    const _0x4bf7f7 = _0x13412e;
                    _0x5b8f2f[_0x4bf7f7(0x113)] = _0x53e920[_0x4bf7f7(0x141)][_0x4bf7f7(0xb2)], _0x37f938[_0x4bf7f7(0x107)][_0x4bf7f7(0x165)] = _0x4bf7f7(0x1e9);
                }, _0x19260d[_0x13412e(0x101)](_0x1427be);
            }
        });
        async function _0x24c6e8() {
            const _0x4e9e23 = _0x36ea83;
            if (!currentChatUserId)
                return;
            if (tokenexpired) {
                showPopupMessage(_0x4e9e23(0xbb)), chatWindow['innerHTML'] = _0x4e9e23(0x139);
                return;
            }
            let _0x32866e = null;
            const _0x15fa4b = messageInput[_0x4e9e23(0x126)][_0x4e9e23(0x1d8)]();
            if (_0x15fa4b) {
                const _0x134621 = {
                    'senderUsername': senderUsername,
                    'receiver': currentChatUserId,
                    'message': _0x15fa4b,
                    'type': _0x4e9e23(0xc0)
                };
                try {
                    socket['emit'](_0x4e9e23(0xc7), _0x134621, _0x2fb36f => {
                        const _0x125666 = _0x4e9e23;
                        messageInput[_0x125666(0x126)] = '', _0x2fb36f?.['error'] && showAlert(_0x125666(0x15f), _0x2fb36f[_0x125666(0x122)]);
                    });
                } catch (_0x2ac872) {
                    console[_0x4e9e23(0x122)](_0x4e9e23(0x18b), _0x2ac872[_0x4e9e23(0x125)]);
                }
            }
            if (_0x3f2e24) {
                const _0x2ae8c5 = await showConfirmBox(_0x4e9e23(0xa1));
                if (!_0x2ae8c5)
                    return showPopupMessage2(_0x4e9e23(0xea));
                showNotification(_0x4e9e23(0x1e7)), loader[_0x4e9e23(0x107)][_0x4e9e23(0x165)] = _0x4e9e23(0x1e9);
                try {
                    const _0x16e7b4 = new FormData();
                    _0x16e7b4[_0x4e9e23(0x189)](_0x4e9e23(0x1c5), _0x3f2e24);
                    const _0x397ff2 = await apiRequest('/api/upload', {
                            'method': _0x4e9e23(0xb6),
                            'headers': { 'Authorization': _0x4e9e23(0x17e) + localStorage['getItem'](_0x4e9e23(0x207)) },
                            'body': _0x16e7b4
                        }), _0x54f595 = await _0x397ff2['json']();
                    if (!_0x54f595['imageUrl']) {
                        showNotification(_0x4e9e23(0xbd)), loader[_0x4e9e23(0x107)][_0x4e9e23(0x165)] = _0x4e9e23(0x204), showPopupMessage(_0x54f595['message'] || _0x4e9e23(0x1dc));
                        return;
                    }
                    _0x54f595?.[_0x4e9e23(0x122)] && (loader[_0x4e9e23(0x107)]['display'] = _0x4e9e23(0x204), showAlert('Error:', _0x54f595['error']));
                    _0x32866e = _0x54f595[_0x4e9e23(0x152)];
                    const _0x44605e = {
                        'senderUsername': senderUsername,
                        'receiver': currentChatUserId,
                        'message': _0x4e9e23(0x105),
                        'type': _0x4e9e23(0x1c5),
                        'fileUrl': _0x32866e
                    };
                    socket['emit']('sendMessage', _0x44605e, _0x43d791 => {
                        const _0x536903 = _0x4e9e23;
                        _0x43d791?.['error'] && showAlert(_0x536903(0x154), _0x43d791[_0x536903(0x122)]);
                    }), _0x3f2e24 = null, loader[_0x4e9e23(0x107)]['display'] = _0x4e9e23(0x204), _0x37f938[_0x4e9e23(0x107)][_0x4e9e23(0x165)] = _0x4e9e23(0x204), _0x24d125['value'] = '';
                } catch (_0x80b0f9) {
                    loader[_0x4e9e23(0x107)][_0x4e9e23(0x165)] = _0x4e9e23(0x204), showNotification(_0x4e9e23(0x1fb)), console[_0x4e9e23(0x122)]('Error\x20uploading\x20image:', _0x80b0f9[_0x4e9e23(0x125)]);
                }
            }
        }
        socket['on'](_0x36ea83(0x1d3), async _0x4f022c => {
            const _0x209f49 = _0x36ea83;
            if (!_0x4f022c || !_0x4f022c[_0x209f49(0x13a)] || !_0x4f022c[_0x209f49(0xeb)])
                return;
            _0x53e073(_0x4f022c), _0x4f022c[_0x209f49(0x13a)] === currentChatUserId || _0x4f022c['receiver'] === currentChatUserId ? (_0x31ad31[_0x209f49(0x107)][_0x209f49(0x165)] = 'none', displayMessage(_0x4f022c, _0x4f022c[_0x209f49(0x13a)] === senderUserId), _0x4f022c['sender'] !== senderUserId && playAudio(_0x209f49(0xcc))) : console['log'](_0x209f49(0xca));
        }), socket['on']('newMessageNotification', _0x44c5ca => {
            const _0x338d0b = _0x36ea83;
            showNotification2(_0x338d0b(0x176) + _0x44c5ca[_0x338d0b(0x98)] + ':\x20' + _0x44c5ca[_0x338d0b(0x20b)][_0x338d0b(0x125)], 0x1b58), playAudio(_0x338d0b(0x1a8)), _0x53e073(_0x44c5ca[_0x338d0b(0x20b)]);
        });
        async function _0x53e073(_0x2fc309) {
            const _0x3cd00f = _0x36ea83;
            try {
                const _0x2b257a = {
                        ..._0x2fc309,
                        'sender': { '_id': _0x2fc309['sender'] },
                        'receiver': { '_id': _0x2fc309[_0x3cd00f(0xeb)] }
                    }, _0x4dd482 = _0x2fc309[_0x3cd00f(0x13a)] === senderUserId ? _0x2fc309['receiver'] : _0x2fc309[_0x3cd00f(0x13a)], _0x567e4e = chatCache[_0x3cd00f(0xfd)](_0x4dd482) || [];
                if (_0x2b257a[_0x3cd00f(0x1b6)] && !_0x567e4e[_0x3cd00f(0x119)](_0x2ccce8 => _0x2ccce8[_0x3cd00f(0x1b6)] === _0x2b257a[_0x3cd00f(0x1b6)])) {
                    const _0x5a483c = [
                        ..._0x567e4e,
                        _0x2b257a
                    ];
                    chatCache[_0x3cd00f(0x1e5)](_0x4dd482, _0x5a483c);
                    const _0x3e696a = await Promise[_0x3cd00f(0x14f)](_0x5a483c[_0x3cd00f(0x1c9)](_0xfdf610 => encryptMessage(JSON[_0x3cd00f(0x1ad)](_0xfdf610))));
                    localStorage[_0x3cd00f(0x11d)]('chat_' + _0x4dd482, JSON[_0x3cd00f(0x1ad)](_0x3e696a));
                }
            } catch (_0x3de478) {
                showAlert(_0x3cd00f(0x170), _0x3de478[_0x3cd00f(0x125)]), console[_0x3cd00f(0x122)]('Error\x20updating\x20message\x20cache:', _0x3de478);
            }
        }
        let _0x29482e, _0x3b2f28 = !![];
        const _0x31ad31 = document[_0x36ea83(0xb4)](_0x36ea83(0x145));
        messageInput[_0x36ea83(0x13b)](_0x36ea83(0x191), () => {
            const _0x35b67b = _0x36ea83;
            currentChatUserId && senderUserId !== currentChatUserId && (_0x3b2f28 && socket && (socket[_0x35b67b(0x97)]('typing', {
                'senderId': senderUserId,
                'receiverId': currentChatUserId
            }), _0x3b2f28 = ![], setTimeout(() => {
                _0x3b2f28 = !![];
            }, 0x5dc)), clearTimeout(_0x29482e));
        }), socket && socket['on'](_0x36ea83(0x131), ({senderId: _0x2e8aaf}) => {
            const _0x5b8f0f = _0x36ea83;
            _0x2e8aaf !== senderUserId && currentChatUserId === _0x2e8aaf && (updateStatus(_0x5b8f0f(0xbc)), _0x31ad31[_0x5b8f0f(0x107)][_0x5b8f0f(0x165)] !== _0x5b8f0f(0x15a) && (_0x31ad31[_0x5b8f0f(0x107)]['display'] = 'flex', _0x31ad31['innerHTML'] = '\x0a\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-dots\x22>\x0a\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span><span></span><span></span>\x0a\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'), clearTimeout(_0x29482e), _0x29482e = setTimeout(() => {
                const _0x136438 = _0x5b8f0f;
                updateStatus(_0x136438(0x157)), _0x31ad31[_0x136438(0x107)][_0x136438(0x165)] = _0x136438(0x204);
            }, 0xbb8));
        }), document[_0x36ea83(0x13b)](_0x36ea83(0xfc), () => {
            const _0x4c6039 = _0x36ea83;
            socket && (document[_0x4c6039(0x1b3)] ? socket[_0x4c6039(0x97)](_0x4c6039(0x128), { 'senderUserId': senderUserId }) : (senderId = senderUserId, receiverId = currentChatUserId, senderUserId && receiverId && socket[_0x4c6039(0x97)](_0x4c6039(0x11a), {
                'senderId': senderId,
                'receiverId': receiverId
            }), socket[_0x4c6039(0x97)](_0x4c6039(0xc1), { 'senderUserId': senderUserId })));
        }), window[_0x36ea83(0x13b)]('beforeunload', () => {
            const _0x497e25 = _0x36ea83;
            socket && socket[_0x497e25(0x97)](_0x497e25(0xba), { 'senderUserId': senderUserId });
        }), socket['on'](_0x36ea83(0xc1), ({senderUserId: _0x2cadac}) => {
            const _0x5eb956 = _0x36ea83;
            userId = _0x2cadac;
            const _0x41ae65 = document[_0x5eb956(0x138)](_0x5eb956(0x19b) + userId + '\x27]');
            _0x41ae65 ? (_0x41ae65[_0x5eb956(0x202)][_0x5eb956(0x17b)](_0x5eb956(0x17c), 'busy', _0x5eb956(0x9b)), _0x41ae65[_0x5eb956(0x202)][_0x5eb956(0x15b)](_0x5eb956(0x9b))) : _0x5eb956(0x1f9), userElement2 && currentChatUserId === _0x2cadac && (userElement2[_0x5eb956(0x202)][_0x5eb956(0x17b)](_0x5eb956(0x17c), 'busy', _0x5eb956(0x9b)), userElement2[_0x5eb956(0x202)][_0x5eb956(0x15b)](_0x5eb956(0x9b)), updateStatus('Online'));
        }), socket['on'](_0x36ea83(0xba), ({senderUserId: _0x28e56a}) => {
            const _0xbe1f17 = _0x36ea83;
            updateStatus(_0xbe1f17(0x1fa)), userId = _0x28e56a;
            const _0x4a5d52 = document[_0xbe1f17(0x138)](_0xbe1f17(0x19b) + userId + '\x27]');
            _0x4a5d52 && (_0x4a5d52['classList']['remove'](_0xbe1f17(0x17c), _0xbe1f17(0x1d1), _0xbe1f17(0x9b)), _0x4a5d52[_0xbe1f17(0x202)][_0xbe1f17(0x15b)](_0xbe1f17(0x17c))), userElement2 && currentChatUserId === _0x28e56a && (userElement2[_0xbe1f17(0x202)][_0xbe1f17(0x17b)](_0xbe1f17(0x17c), _0xbe1f17(0x1d1), _0xbe1f17(0x9b)), userElement2['classList'][_0xbe1f17(0x15b)](_0xbe1f17(0x17c)), checkUserAvailability(currentChatUserId));
        }), socket['on'](_0x36ea83(0x128), ({senderUserId: _0x3d459d}) => {
            const _0x2fbfd4 = _0x36ea83;
            userId = _0x3d459d;
            const _0x43ee31 = document[_0x2fbfd4(0x138)](_0x2fbfd4(0x19b) + userId + '\x27]');
            _0x43ee31 && (_0x43ee31[_0x2fbfd4(0x202)][_0x2fbfd4(0x17b)](_0x2fbfd4(0x17c), _0x2fbfd4(0x1d1), _0x2fbfd4(0x9b)), _0x43ee31[_0x2fbfd4(0x202)]['add'](_0x2fbfd4(0x1d1))), userElement2 && currentChatUserId === _0x3d459d && (userElement2[_0x2fbfd4(0x202)]['remove'](_0x2fbfd4(0x17c), _0x2fbfd4(0x1d1), _0x2fbfd4(0x9b)), userElement2[_0x2fbfd4(0x202)]['add'](_0x2fbfd4(0x1d1)), updateStatus(_0x2fbfd4(0x1f6)));
        }), socket['on'](_0x36ea83(0x213), _0x34a4e8 => {
            const _0x10e079 = _0x36ea83, {
                    chatId: _0x24db74,
                    readerId: _0xab2278
                } = _0x34a4e8;
            currentChatUserId === _0xab2278 && senderUserId === _0x24db74 && (console[_0x10e079(0x12b)](_0x10e079(0x1ee) + _0xab2278 + _0x10e079(0x1a9) + _0x24db74), lol());
        });
    } else
        console[_0x36ea83(0x12b)](_0x36ea83(0xf4), socket), console[_0x36ea83(0x12b)](_0x36ea83(0x110));
    socket['on']('disconnect', _0x40fe21 => {
        const _0x3dc345 = _0x36ea83;
        console[_0x3dc345(0x12b)](_0x3dc345(0x1f8), _0x40fe21), document[_0x3dc345(0xb4)](_0x3dc345(0xf1))[_0x3dc345(0x195)] = _0x3dc345(0x19c), document[_0x3dc345(0xb4)](_0x3dc345(0xf1))[_0x3dc345(0x202)][_0x3dc345(0x17b)](_0x3dc345(0xd5), _0x3dc345(0x216)), document['getElementById'](_0x3dc345(0xf1))[_0x3dc345(0x202)][_0x3dc345(0x15b)](_0x3dc345(0x216));
    }), socket['on'](_0x36ea83(0x99), _0x32d0ee => {
        const _0x28071c = _0x36ea83;
        console['error'](_0x28071c(0x156), _0x32d0ee), document[_0x28071c(0xb4)](_0x28071c(0xf1))['textContent'] = _0x28071c(0x14e), document[_0x28071c(0xb4)]('socket-status')[_0x28071c(0x202)]['remove'](_0x28071c(0xd5), _0x28071c(0x216)), document[_0x28071c(0xb4)](_0x28071c(0xf1))[_0x28071c(0x202)][_0x28071c(0x15b)]('dis');
    }), socket['on'](_0x36ea83(0xa4), _0xb71e8f => {
        const _0x5e06d9 = _0x36ea83;
        console[_0x5e06d9(0x12b)]('🛜\x20Reconnected\x20to\x20server,\x20attempt\x20#' + _0xb71e8f), document[_0x5e06d9(0xb4)](_0x5e06d9(0xf1))[_0x5e06d9(0x195)] = _0x5e06d9(0xc9) + _0xb71e8f + ')', document[_0x5e06d9(0xb4)]('socket-status')['classList']['remove'](_0x5e06d9(0xd5), _0x5e06d9(0x216)), document[_0x5e06d9(0xb4)]('socket-status')[_0x5e06d9(0x202)]['add'](_0x5e06d9(0xd5));
    }), socket['on']('reconnect_error', _0x535af7 => {
        const _0x54932c = _0x36ea83;
        console['error']('⚠️\x20Reconnection\x20failed:', _0x535af7), document[_0x54932c(0xb4)]('socket-status')['textContent'] = _0x54932c(0x159), document['getElementById']('socket-status')[_0x54932c(0x202)][_0x54932c(0x17b)](_0x54932c(0xd5), _0x54932c(0x216)), document[_0x54932c(0xb4)](_0x54932c(0xf1))[_0x54932c(0x202)][_0x54932c(0x15b)](_0x54932c(0x216));
    });
}
async function toggleBlockUser() {
    const _0x17f154 = _0x3207fb;
    if (!currentChatUserId) {
        showPopupMessage2(_0x17f154(0xdd));
        return;
    }
    const _0x4d9bb3 = blockButton[_0x17f154(0x1e2)][_0x17f154(0xa5)] === _0x17f154(0x1c3), _0x4247e3 = _0x4d9bb3 ? 'unblock-user' : _0x17f154(0xbf);
    if (!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20' + _0x4247e3 + '\x20' + currentChatUsername + '?'))
        return;
    try {
        const _0x5021d9 = {
                'blockUserId': currentChatUserId,
                'unblockUserId': currentChatUserId
            }, _0x505f06 = await apiRequest(_0x17f154(0xc2) + _0x4247e3, {
                'method': _0x17f154(0xb6),
                'headers': {
                    'Content-Type': _0x17f154(0x103),
                    'Authorization': 'Bearer\x20' + localStorage[_0x17f154(0x1a3)](_0x17f154(0x207))
                },
                'body': JSON[_0x17f154(0x1ad)](_0x5021d9)
            }), _0x2bbd71 = await _0x505f06['json']();
        _0x505f06['ok'] ? (blockButton[_0x17f154(0x195)] = _0x4d9bb3 ? 'Block' : _0x17f154(0xb3), blockButton[_0x17f154(0x1e2)][_0x17f154(0xa5)] = !_0x4d9bb3, socket[_0x17f154(0x97)](_0x17f154(0x120), { 'currentChatUserId': currentChatUserId }), showPopupMessage(currentChatUsername + _0x17f154(0x179) + (_0x4d9bb3 ? _0x17f154(0xac) : _0x17f154(0xa5)) + '.'), _0x4d9bb3 && (recipientUserId = currentChatUserId, socket ? socket['emit'](_0x17f154(0x1ae), { 'recipientUserId': recipientUserId }) : console[_0x17f154(0x122)](_0x17f154(0x218), recipientUserId))) : showAlert('Error', _0x2bbd71[_0x17f154(0x122)] || 'Error\x20blocking\x20user.');
    } catch (_0x49cced) {
        console['error'](_0x17f154(0xf8), _0x49cced[_0x17f154(0x125)]);
    }
}
async function markMessagesssssAsRead(_0x1daad8, _0x34f4ef) {
    const _0x408641 = _0x3207fb;
    try {
        const _0x5cfa8d = await apiRequest('/api/chats/mark-read', {
                'method': _0x408641(0x106),
                'headers': {
                    'Content-Type': 'application/json',
                    'Authorization': _0x408641(0x17e) + localStorage[_0x408641(0x1a3)]('accessToken')
                },
                'body': JSON[_0x408641(0x1ad)]({
                    'senderId': senderUserId,
                    'receiverId': currentChatUserId
                })
            }), _0x378489 = await _0x5cfa8d[_0x408641(0x1b5)]();
        _0x5cfa8d['ok'] ? (console[_0x408641(0x12b)](_0x408641(0xce), _0x378489[_0x408641(0x10b)]), io['to'](_0x1daad8)[_0x408641(0x97)](_0x408641(0x213), {
            'readerId': readerId,
            'chatId': chatId
        })) : console['error'](_0x408641(0x203), _0x378489[_0x408641(0x122)]);
    } catch (_0x329f02) {
        console[_0x408641(0x122)]('Error\x20marking\x20messages\x20as\x20read:', _0x329f02);
    }
}
async function updateBlockButton() {
    const _0x5ac2e8 = _0x3207fb;
    if (!currentChatUserId) {
        showPopupMessage(_0x5ac2e8(0xdd));
        return;
    }
    try {
        const _0x2bedc5 = await apiRequest(_0x5ac2e8(0x16a) + currentChatUserId, {
            'method': 'GET',
            'headers': { 'Authorization': _0x5ac2e8(0x17e) + localStorage[_0x5ac2e8(0x1a3)](_0x5ac2e8(0x207)) }
        });
        if (!_0x2bedc5['ok'])
            throw new Error('HTTP\x20error!\x20Status:\x20' + _0x2bedc5[_0x5ac2e8(0x1ff)]);
        const _0x3bfaa2 = await _0x2bedc5[_0x5ac2e8(0x1b5)]();
        if (typeof _0x3bfaa2[_0x5ac2e8(0xc6)] === _0x5ac2e8(0x217))
            throw new Error(_0x5ac2e8(0x206));
        blockButton['textContent'] = _0x3bfaa2[_0x5ac2e8(0xc6)] ? _0x5ac2e8(0xb3) : _0x5ac2e8(0x183), blockButton[_0x5ac2e8(0x1e2)][_0x5ac2e8(0xa5)] = _0x3bfaa2[_0x5ac2e8(0xc6)][_0x5ac2e8(0x112)]();
    } catch (_0x11512a) {
        console[_0x5ac2e8(0x122)](_0x5ac2e8(0xff), _0x11512a), blockButton[_0x5ac2e8(0x107)][_0x5ac2e8(0x165)] = _0x5ac2e8(0x204);
    }
}
function toggleDropdown() {
    const _0x446c92 = _0x3207fb, _0x5e35f7 = document[_0x446c92(0xb4)]('dropdown-menu');
    _0x5e35f7['classList'][_0x446c92(0xda)](_0x446c92(0x155)) ? (_0x5e35f7[_0x446c92(0x202)][_0x446c92(0x17b)](_0x446c92(0x155)), setTimeout(() => _0x5e35f7[_0x446c92(0x107)]['display'] = _0x446c92(0x204), 0xc8)) : (_0x5e35f7['style'][_0x446c92(0x165)] = 'block', setTimeout(() => _0x5e35f7[_0x446c92(0x202)][_0x446c92(0x15b)](_0x446c92(0x155)), 0xa));
}
document[_0x3207fb(0x13b)](_0x3207fb(0xae), function (_0x123e23) {
    const _0xc50267 = _0x3207fb, _0x5718f8 = document[_0xc50267(0xb4)]('dropdown-menu'), _0x89bca3 = document['getElementById']('more-btn');
    !_0x89bca3[_0xc50267(0xda)](_0x123e23['target']) && !_0x5718f8[_0xc50267(0xda)](_0x123e23[_0xc50267(0x141)]) && (_0x5718f8[_0xc50267(0x202)]['remove'](_0xc50267(0x155)), setTimeout(() => _0x5718f8['style'][_0xc50267(0x165)] = 'none', 0xc8));
}), document[_0x3207fb(0xb4)](_0x3207fb(0x1a5))[_0x3207fb(0x13b)](_0x3207fb(0xae), function (_0x2ff292) {
    const _0x5f3835 = _0x3207fb, _0x2be29d = document[_0x5f3835(0xb4)](_0x5f3835(0x1a5));
    _0x2ff292[_0x5f3835(0x141)][_0x5f3835(0x169)](_0x5f3835(0x108)) && (_0x2be29d[_0x5f3835(0x202)][_0x5f3835(0x17b)](_0x5f3835(0x155)), setTimeout(() => _0x2be29d[_0x5f3835(0x107)][_0x5f3835(0x165)] = _0x5f3835(0x204), 0xc8));
});
async function checkUserAvailability(_0x132194) {
    const _0x33f8e1 = _0x3207fb;
    try {
        const _0x274fbd = await apiRequest(_0x33f8e1(0x109) + _0x132194, {
            'method': _0x33f8e1(0x1eb),
            'headers': { 'Authorization': _0x33f8e1(0x17e) + localStorage[_0x33f8e1(0x1a3)](_0x33f8e1(0x207)) }
        });
        if (!_0x274fbd['ok'])
            throw new Error('User\x20not\x20found\x20or\x20server\x20error');
        const _0x11648a = await _0x274fbd['json']();
        _0x11648a[_0x33f8e1(0xb8)] ? (updateStatus('Online'), chatUserElement[_0x33f8e1(0x202)][_0x33f8e1(0x15b)](_0x33f8e1(0x9b)), chatUserElement[_0x33f8e1(0x202)]['remove'](_0x33f8e1(0x17c))) : (chatUserElement[_0x33f8e1(0x202)][_0x33f8e1(0x15b)](_0x33f8e1(0x17c)), chatUserElement[_0x33f8e1(0x202)][_0x33f8e1(0x17b)]('online'));
        if (lastActiveElement) {
            if (chatUserElement['classList'][_0x33f8e1(0xda)]('offline')) {
                const _0x27faaa = new Date(_0x11648a[_0x33f8e1(0x1a6)]), _0x36a8a0 = new Date(), _0x489ba3 = _0x27faaa[_0x33f8e1(0xab)](_0x33f8e1(0x17d), {
                        'hour': '2-digit',
                        'minute': _0x33f8e1(0x20e),
                        'hour12': !![]
                    }), _0x13d470 = new Intl[(_0x33f8e1(0x215))]([], {
                        'year': 'numeric',
                        'month': _0x33f8e1(0x20e),
                        'day': '2-digit'
                    }), _0x271e4e = _0x27faaa[_0x33f8e1(0x1e4)]() === _0x36a8a0['toDateString'](), _0x270da6 = _0x27faaa[_0x33f8e1(0xe9)]() === _0x36a8a0[_0x33f8e1(0xe9)]() - 0x1 && _0x27faaa['getMonth']() === _0x36a8a0['getMonth']() && _0x27faaa[_0x33f8e1(0x1db)]() === _0x36a8a0[_0x33f8e1(0x1db)]();
                let _0x286f24;
                if (_0x271e4e)
                    _0x286f24 = _0x33f8e1(0x10c) + _0x489ba3;
                else
                    _0x270da6 ? _0x286f24 = _0x33f8e1(0x166) + _0x489ba3 : _0x286f24 = _0x33f8e1(0x10c) + _0x13d470[_0x33f8e1(0xfa)](_0x27faaa) + '\x20' + _0x489ba3;
                lastActiveElement['textContent'] = _0x286f24;
            }
        }
    } catch (_0x522360) {
        console[_0x33f8e1(0x122)](_0x33f8e1(0x13f), _0x522360);
    }
}
function updateStatus(_0x1a36ed) {
    const _0x184f30 = _0x3207fb;
    lastActiveElement[_0x184f30(0x107)][_0x184f30(0x100)] = _0x184f30(0x116), lastActiveElement[_0x184f30(0x107)]['opacity'] = '0', setTimeout(() => {
        const _0x3ff5ab = _0x184f30;
        if (_0x1a36ed === 'Online')
            lastActiveElement[_0x3ff5ab(0x195)] = 'Online', lastActiveElement[_0x3ff5ab(0x107)]['color'] = 'green', lastActiveElement[_0x3ff5ab(0x107)][_0x3ff5ab(0xd2)] = _0x3ff5ab(0x16c);
        else {
            if (_0x1a36ed === _0x3ff5ab(0x1f6))
                lastActiveElement[_0x3ff5ab(0x195)] = _0x3ff5ab(0x10f), lastActiveElement['style'][_0x3ff5ab(0x1a0)] = _0x3ff5ab(0x104), lastActiveElement[_0x3ff5ab(0x107)]['fontWeight'] = 'normal';
            else {
                if (_0x1a36ed === _0x3ff5ab(0x1fa))
                    lastActiveElement['textContent'] = _0x3ff5ab(0x1fa), lastActiveElement['style'][_0x3ff5ab(0x1a0)] = _0x3ff5ab(0x1da), lastActiveElement[_0x3ff5ab(0x107)][_0x3ff5ab(0xd2)] = _0x3ff5ab(0xb9);
                else
                    _0x1a36ed === 'Typing' && (lastActiveElement['textContent'] = 'User\x20is\x20Typing\x20.\x20.\x20.', lastActiveElement[_0x3ff5ab(0x107)][_0x3ff5ab(0x1a0)] = _0x3ff5ab(0x15e), lastActiveElement['style']['fontWeight'] = _0x3ff5ab(0xb9));
            }
        }
        lastActiveElement['style'][_0x3ff5ab(0x1fc)] = '1';
    }, 0x12c);
}
function lol() {
    const _0x4a9b61 = _0x3207fb;
    document[_0x4a9b61(0x11c)](_0x4a9b61(0x1bf))['forEach'](_0xfb6bd2 => {
        const _0x37afe0 = _0x4a9b61;
        _0xfb6bd2[_0x37afe0(0x195)] === '✔' && (_0xfb6bd2['textContent'] = '✔✔');
    });
}
function setViewportHeight() {
    const _0x4c31fc = _0x3207fb;
    document[_0x4c31fc(0x9d)][_0x4c31fc(0x107)][_0x4c31fc(0x151)](_0x4c31fc(0x15c), window['innerHeight'] * 0.01 + 'px');
}
window[_0x3207fb(0x13b)](_0x3207fb(0x1b8), setViewportHeight), setViewportHeight();
function showChatPanel() {
    const _0x151eea = _0x3207fb;
    document[_0x151eea(0x138)](_0x151eea(0x1f1))[_0x151eea(0x202)][_0x151eea(0x15b)](_0x151eea(0x211));
}
function showUserListPanel() {
    const _0x16fdd4 = _0x3207fb;
    document[_0x16fdd4(0x138)](_0x16fdd4(0x1f1))[_0x16fdd4(0x202)][_0x16fdd4(0x17b)]('show-chat');
}
document[_0x3207fb(0x138)]('#chat-list')[_0x3207fb(0x13b)]('click', _0x4b1fca => {
    const _0x113b02 = _0x3207fb;
    window[_0x113b02(0x162)] <= 0x300 && showChatPanel();
}), document[_0x3207fb(0x138)](_0x3207fb(0x130))[_0x3207fb(0x13b)](_0x3207fb(0xae), _0x2ab5f3 => {
    const _0x7e4bbc = _0x3207fb;
    window[_0x7e4bbc(0x162)] <= 0x300 && showUserListPanel();
});
const savedImage = localStorage['getItem'](_0x3207fb(0x212));
document['getElementById'](_0x3207fb(0xc3))['src'] = savedImage || _0x3207fb(0xec);
function showNotification(_0x27a4df) {
    const _0x5abbdf = _0x3207fb, _0x4f1373 = document[_0x5abbdf(0xd0)](_0x5abbdf(0xe1));
    _0x4f1373['textContent'] = _0x27a4df, _0x4f1373[_0x5abbdf(0x107)][_0x5abbdf(0x1b7)] = _0x5abbdf(0x180), document[_0x5abbdf(0xa7)][_0x5abbdf(0xd9)](_0x4f1373), setTimeout(() => _0x4f1373[_0x5abbdf(0x17b)](), 0xbb8);
}
async function generateKey() {
    const _0x4b168d = _0x3207fb;
    if (sessionStorage[_0x4b168d(0x1a3)](_0x4b168d(0x1e3)))
        return;
    const _0x25c690 = await crypto[_0x4b168d(0x1aa)][_0x4b168d(0x16d)]({
            'name': _0x4b168d(0xd7),
            'length': 0x100
        }, !![], [
            'encrypt',
            _0x4b168d(0xe8)
        ]), _0x121a85 = new Uint8Array(await crypto[_0x4b168d(0x1aa)]['exportKey'](_0x4b168d(0x193), _0x25c690));
    sessionStorage[_0x4b168d(0x11d)]('encryptionKey', JSON[_0x4b168d(0x1ad)](Array['from'](_0x121a85)));
}
generateKey();
async function getKey() {
    const _0x48b3af = _0x3207fb, _0x18fffb = JSON[_0x48b3af(0x132)](sessionStorage[_0x48b3af(0x1a3)]('encryptionKey')), _0x307cb7 = new Uint8Array(_0x18fffb);
    return await crypto['subtle']['importKey'](_0x48b3af(0x193), _0x307cb7, { 'name': _0x48b3af(0xd7) }, !![], [
        'encrypt',
        _0x48b3af(0xe8)
    ]);
}
async function encryptMessage(_0x146a16) {
    const _0x14221c = _0x3207fb, _0x34c1b2 = await getKey(), _0x32b1c0 = crypto[_0x14221c(0xcb)](new Uint8Array(0xc)), _0x1368ff = new TextEncoder()['encode'](_0x146a16), _0x19244a = await crypto['subtle'][_0x14221c(0x161)]({
            'name': 'AES-GCM',
            'iv': _0x32b1c0
        }, _0x34c1b2, _0x1368ff);
    return JSON[_0x14221c(0x1ad)]({
        'iv': Array[_0x14221c(0x1be)](_0x32b1c0),
        'data': Array[_0x14221c(0x1be)](new Uint8Array(_0x19244a))
    });
}
async function decryptMessage(_0x3b1b96) {
    const _0x9bf092 = _0x3207fb;
    try {
        const _0x30a818 = await getKey(), _0x379c0e = JSON[_0x9bf092(0x132)](_0x3b1b96), _0x4d7f65 = new Uint8Array(_0x379c0e['iv']), _0x1f0e5a = new Uint8Array(_0x379c0e[_0x9bf092(0x1c2)]), _0x1f3300 = await crypto[_0x9bf092(0x1aa)][_0x9bf092(0xe8)]({
                'name': _0x9bf092(0xd7),
                'iv': _0x4d7f65
            }, _0x30a818, _0x1f0e5a);
        return new TextDecoder()['decode'](_0x1f3300);
    } catch (_0x216a44) {
        return console[_0x9bf092(0x122)](_0x9bf092(0x1f4), _0x216a44), null;
    }
}
async function loadChatCache() {
    const _0x13349c = _0x3207fb;
    showNotification(_0x13349c(0xed));
    let _0x2037c0 = ![];
    for (let _0x2eaa05 = 0x0; _0x2eaa05 < localStorage[_0x13349c(0x209)]; _0x2eaa05++) {
        const _0x405ffc = localStorage[_0x13349c(0xfb)](_0x2eaa05);
        if (_0x405ffc[_0x13349c(0x1c0)]('chat_')) {
            const _0x5e55fc = _0x405ffc['split']('_')[0x1], _0x58e3d9 = localStorage[_0x13349c(0x1a3)](_0x405ffc);
            if (_0x58e3d9)
                try {
                    const _0x1db7f4 = await Promise['all'](JSON[_0x13349c(0x132)](_0x58e3d9)[_0x13349c(0x1c9)](async _0x596432 => {
                        const _0x5b72fa = _0x13349c, _0x2dfb74 = await decryptMessage(_0x596432);
                        if (_0x2dfb74 === null)
                            throw new Error(_0x5b72fa(0x9c));
                        return JSON['parse'](_0x2dfb74);
                    }));
                    chatCache['set'](_0x5e55fc, _0x1db7f4);
                } catch (_0x2558d5) {
                    console['error'](_0x13349c(0x14b) + _0x5e55fc + ':', _0x2558d5), localStorage[_0x13349c(0xb5)](_0x405ffc), console[_0x13349c(0x96)](_0x13349c(0x13c) + _0x5e55fc), _0x2037c0 = !![];
                }
        }
    }
    _0x2037c0 ? showNotification(_0x13349c(0x196)) : showNotification(_0x13349c(0x1c8));
}
window[_0x3207fb(0x13b)]('load', loadChatCache), document[_0x3207fb(0x13b)](_0x3207fb(0x20d), () => {
    const _0xf90c9d = _0x3207fb, _0x4236a0 = document[_0xf90c9d(0xb4)](_0xf90c9d(0x12c)), _0x171f33 = document[_0xf90c9d(0xb4)](_0xf90c9d(0x172)), _0x15f9b9 = document[_0xf90c9d(0xb4)](_0xf90c9d(0x1e0)), _0x30d1be = new EmojiMart[(_0xf90c9d(0x1d5))]({
            'onEmojiSelect': _0xeef2a2 => {
                const _0x1e7e32 = _0xf90c9d;
                _0x171f33['value'] += _0xeef2a2[_0x1e7e32(0x164)];
            },
            'theme': _0xf90c9d(0xa6)
        });
    _0x15f9b9[_0xf90c9d(0xd9)](_0x30d1be), _0x4236a0[_0xf90c9d(0x13b)]('click', () => {
        const _0x32c8ec = _0xf90c9d;
        _0x15f9b9[_0x32c8ec(0x202)][_0x32c8ec(0xe5)](_0x32c8ec(0x1b3));
    }), document['addEventListener'](_0xf90c9d(0xae), _0x1f21f5 => {
        const _0xbb70ea = _0xf90c9d;
        !_0x15f9b9[_0xbb70ea(0xda)](_0x1f21f5[_0xbb70ea(0x141)]) && _0x1f21f5['target'] !== _0x4236a0 && _0x15f9b9[_0xbb70ea(0x202)]['add']('hidden');
    });
}), document[_0x3207fb(0xb4)](_0x3207fb(0x163))['onclick'] = function () {
    const _0x2ea6bf = _0x3207fb;
    document['getElementById']('wallpaperModal')[_0x2ea6bf(0x107)][_0x2ea6bf(0x165)] = 'block';
};
function closeModal() {
    const _0x212768 = _0x3207fb;
    document[_0x212768(0xb4)](_0x212768(0x102))[_0x212768(0x107)][_0x212768(0x165)] = _0x212768(0x204);
}
function setChatBackground(_0x46424e) {
    const _0x5a5e0e = _0x3207fb, _0x5e929a = document[_0x5a5e0e(0x138)]('.chat-window');
    _0x5e929a[_0x5a5e0e(0x107)][_0x5a5e0e(0x186)] = _0x46424e, _0x5e929a[_0x5a5e0e(0x107)][_0x5a5e0e(0xdc)] = _0x5a5e0e(0x17f), _0x5e929a[_0x5a5e0e(0x107)][_0x5a5e0e(0xa2)] = _0x5a5e0e(0xe0), localStorage[_0x5a5e0e(0x11d)](_0x5a5e0e(0xe3), _0x46424e), closeModal();
}
function resetChatBackground() {
    const _0x186442 = _0x3207fb;
    document[_0x186442(0x138)](_0x186442(0x1ef))[_0x186442(0x107)][_0x186442(0x186)] = '', localStorage['removeItem'](_0x186442(0xe3)), closeModal();
}
window[_0x3207fb(0x1f2)] = function () {
    const _0x48823d = _0x3207fb;
    let _0x5139cd = localStorage[_0x48823d(0x1a3)](_0x48823d(0xe3));
    if (_0x5139cd) {
        let _0x209d2f = document['querySelector']('.chat-window');
        _0x209d2f[_0x48823d(0x107)]['backgroundImage'] = _0x5139cd, _0x209d2f[_0x48823d(0x107)][_0x48823d(0xdc)] = _0x48823d(0x17f), _0x209d2f[_0x48823d(0x107)][_0x48823d(0xa2)] = _0x48823d(0xe0);
    }
}, document['addEventListener']('DOMContentLoaded', function () {
    const _0x1720b2 = _0x3207fb, _0x3199ff = document[_0x1720b2(0xb4)]('blur-btn'), _0x1d9292 = document[_0x1720b2(0xb4)]('blur-slider-container'), _0x383bcc = document[_0x1720b2(0xb4)](_0x1720b2(0x14d)), _0x46df3b = document['getElementById']('blur-value'), _0x2e1b1b = document['getElementById'](_0x1720b2(0xbe));
    let _0x1fa1bf = localStorage[_0x1720b2(0x1a3)](_0x1720b2(0x9a)) || 0x5;
    document[_0x1720b2(0x9d)]['style']['setProperty'](_0x1720b2(0xa9), _0x1fa1bf + 'px'), _0x383bcc[_0x1720b2(0x126)] = _0x1fa1bf, _0x46df3b['textContent'] = _0x1fa1bf, _0x3199ff[_0x1720b2(0x13b)](_0x1720b2(0xae), function () {
        const _0x3cecb5 = _0x1720b2;
        _0x1d9292[_0x3cecb5(0x107)][_0x3cecb5(0x165)] = _0x3cecb5(0x1e9);
    }), _0x383bcc[_0x1720b2(0x13b)]('input', function () {
        const _0x351bb3 = _0x1720b2;
        document[_0x351bb3(0x9d)][_0x351bb3(0x107)][_0x351bb3(0x151)](_0x351bb3(0xa9), this[_0x351bb3(0x126)] + 'px'), _0x46df3b[_0x351bb3(0x195)] = this[_0x351bb3(0x126)], localStorage[_0x351bb3(0x11d)]('chatBlur', this[_0x351bb3(0x126)]);
    }), _0x2e1b1b[_0x1720b2(0x13b)]('click', function () {
        const _0x33d11 = _0x1720b2;
        _0x1d9292[_0x33d11(0x107)]['display'] = _0x33d11(0x204);
    });
});
function clearChatCacheCnf(_0x5a0955, _0x2ad779) {
    const _0x3db1e2 = _0x3207fb;
    if (!confirm(_0x3db1e2(0xcf) + currentChatUsername + '?'))
        return;
    clearChatCache(_0x5a0955, _0x2ad779);
}
function clearChatCache(_0x4ae2e5, _0x34364b) {
    const _0x4f250d = _0x3207fb;
    chatCache[_0x4f250d(0x10e)](_0x4ae2e5) && chatCache[_0x4f250d(0x1d9)](_0x4ae2e5);
    const _0x579a76 = _0x4f250d(0x1a7) + _0x4ae2e5;
    localStorage[_0x4f250d(0x1a3)](_0x579a76) && localStorage[_0x4f250d(0xb5)](_0x579a76);
    const _0x5859e3 = document['getElementById'](_0x4f250d(0x214));
    currentChatUsername === _0x34364b && (_0x5859e3[_0x4f250d(0x107)]['transition'] = _0x4f250d(0x185), _0x5859e3['style'][_0x4f250d(0x1fc)] = '0', _0x5859e3['style'][_0x4f250d(0x1dd)] = _0x4f250d(0xf9), setTimeout(() => {
        const _0x582c91 = _0x4f250d;
        _0x5859e3[_0x582c91(0x1ea)] = '', _0x5859e3[_0x582c91(0x107)][_0x582c91(0x1fc)] = '1', _0x5859e3['style']['transform'] = _0x582c91(0x148);
    }, 0x190)), showPopupMessage(_0x4f250d(0x199) + _0x34364b);
}
async function deleteChatHistory(_0x3c7001) {
    const _0x287451 = _0x3207fb;
    if (!_0x3c7001) {
        showPopupMessage2(_0x287451(0x1bd));
        return;
    }
    const _0x1adedb = confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20the\x20entire\x20chat\x20history?\x20This\x20action\x20cannot\x20be\x20undone.');
    if (!_0x1adedb)
        return;
    try {
        showPopupMessage2(_0x287451(0x18f), 0x2710, _0x287451(0xe6));
        const _0x191619 = await apiRequest(_0x287451(0xf7) + senderUserId + '/' + _0x3c7001, {
                'method': _0x287451(0x1df),
                'headers': {
                    'Content-Type': 'application/json',
                    'Authorization': _0x287451(0x17e) + localStorage['getItem']('accessToken')
                }
            }), _0x2632b2 = await _0x191619['json']();
        if (_0x191619['ok']) {
            console[_0x287451(0x12b)](_0x287451(0x1d0), _0x2632b2), showPopupMessage2(_0x287451(0x20f), 0xbb8, 'green');
            let _0xa7a45 = JSON[_0x287451(0x132)](localStorage[_0x287451(0x1a3)](_0x287451(0x19d))) || [];
            _0xa7a45 = _0xa7a45['filter'](_0x123c8d => _0x123c8d[_0x287451(0xc5)] !== _0x3c7001), localStorage['setItem']('chattedUsers', JSON[_0x287451(0x1ad)](_0xa7a45)), clearChatCache(currentChatUserId, currentChatUsername);
            const _0x349b0f = document['getElementById'](_0x287451(0x214));
            loadChatList(), socket['emit']('chatDeleted', {
                'senderUsername': senderUsername,
                'chatUserId': _0x3c7001
            });
        } else
            console[_0x287451(0x122)](_0x287451(0x1d4), _0x2632b2[_0x287451(0x122)]), alert('Error:\x20' + _0x2632b2[_0x287451(0x122)]);
    } catch (_0x54a2fe) {
        showPopupMessage2(_0x287451(0x153), 0x1388), console[_0x287451(0x122)]('Error\x20deleting\x20chat\x20history:', _0x54a2fe);
    }
}
socket['on'](_0x3207fb(0x1f5), ({
    senderUserId: _0x38c861,
    senderUsername: _0x4fe02f
}) => {
    const _0x19854b = _0x3207fb;
    clearChatCache(_0x38c861, _0x4fe02f), console['log']('Chat\x20history\x20with\x20' + _0x38c861 + _0x19854b(0x1b2)), showPopupMessage2(_0x19854b(0x188) + _0x4fe02f + _0x19854b(0x1b2), 0x1388);
}), intializeSocket(), socket['on']('error', _0x527c33 => {
    const _0x3b56d9 = _0x3207fb;
    console['error'](_0x3b56d9(0x95), _0x527c33), showAlert(_0x3b56d9(0x143), _0x527c33[_0x3b56d9(0x125)] || 'Socket\x20connection\x20failed,\x20try\x20again\x20later.');
});
